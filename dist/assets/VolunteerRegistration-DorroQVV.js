import{a as G,u as q,r as c,j as e,C as I,R as O,A as Y,d as H,e as J,L as W,v as E,f as K,h as Q,i as Z,k as ee,l as ae,F as re,U as se}from"./index-CTR9K_C5.js";import{H as h}from"./heart-CbsRToVe.js";const oe=()=>{const g=G(),{signUpVolunteer:P,signIn:le,isAuthenticated:p,profile:v,loading:f,getRoleBasedRedirect:N}=q(),[o,b]=c.useState(1),[r,j]=c.useState({firstName:"",lastName:"",email:"",phone:"",personalId:"",faculty:"",password:"",confirmPassword:"",role:"",gender:"",tl_team:""}),[T,d]=c.useState([]),[y,w]=c.useState(!1),[_,R]=c.useState(!1),x=[{id:1,title:"Personal Information",icon:J},{id:2,title:"Role Selection",icon:h},{id:3,title:"Account Security",icon:W}],$=[{value:"registration",label:"Registration Desk"},{value:"building",label:"Building Assistance"},{value:"info_desk",label:"Info Desk"},{value:"ushers",label:"Ushers"},{value:"marketing",label:"Marketing"},{value:"media",label:"Media"},{value:"ER",label:"ER Team"},{value:"BD team",label:"BD Team"},{value:"catering",label:"Catering"},{value:"feedback",label:"Feedback Team"},{value:"stage",label:"Stage Team"},{value:"team_leader",label:"Team Leader"}],A=[{value:"registration",label:"Registration Team"},{value:"building",label:"Building Team"},{value:"info_desk",label:"Info Desk Team"},{value:"ushers",label:"Ushers Team"},{value:"marketing",label:"Marketing Team"},{value:"media",label:"Media Team"},{value:"ER",label:"ER Team"},{value:"BD team",label:"BD Team"},{value:"catering",label:"Catering Team"},{value:"feedback",label:"Feedback Team"},{value:"stage",label:"Stage Team"}],D=[{value:"male",label:"Male"},{value:"female",label:"Female"}];c.useEffect(()=>{p&&v&&!f&&(console.log("âœ… Auth context ready, redirecting to dashboard..."),g(N(),{replace:!0}))},[p,v,f,g,N]);const i=(a,l)=>{j(t=>({...t,[a]:l})),d(t=>t.filter(n=>n.field!==a))};c.useEffect(()=>{r.role!=="team_leader"&&j(a=>({...a,tl_team:""}))},[r.role]);const L=a=>!a||!a.trim()?"Gender is required":["male","female"].includes(a.trim().toLowerCase())?null:"Please select a valid gender",k=a=>{const l=[];if(a===1){const t=E(r.firstName,"First name");t&&l.push({field:"firstName",message:t});const n=E(r.lastName,"Last name");n&&l.push({field:"lastName",message:n});const m=K(r.email);m&&l.push({field:"email",message:m});const u=Q(r.phone);u&&l.push({field:"phone",message:u});const S=Z(r.personalId);S&&l.push({field:"personalId",message:S}),r.faculty||l.push({field:"faculty",message:"Faculty is required"});const C=L(r.gender);C&&l.push({field:"gender",message:C})}if(a===2&&(r.role||l.push({field:"role",message:"Please select a volunteer role"}),r.role==="team_leader"&&!r.tl_team&&l.push({field:"tl_team",message:"Please select which team you will lead"})),a===3){const t=ee(r.password);t&&l.push({field:"password",message:t});const n=ae(r.password,r.confirmPassword);n&&l.push({field:"confirmPassword",message:n})}return l},F=()=>{const a=k(o);if(a.length>0){d(a);return}d([]),o<3&&b(o+1)},V=()=>{o>1&&b(o-1)},X=async a=>{a.preventDefault();const l=[1,2,3].flatMap(t=>k(t));if(l.length>0){d(l);const t=Math.min(...l.map(n=>["firstName","lastName","email","phone","personalId","faculty","gender"].includes(n.field)?1:["role","tl_team"].includes(n.field)?2:["password","confirmPassword"].includes(n.field)?3:1));b(t);return}w(!0),d([]);try{const t={first_name:r.firstName.trim(),last_name:r.lastName.trim(),phone:r.phone.trim(),personal_id:r.personalId.trim(),faculty:r.faculty,role:r.role,gender:r.gender,tl_team:r.tl_team||null},{data:n,error:m}=await P(r.email,r.password,t);if(m){d([{field:"general",message:m.message}]);return}const u=n==null?void 0:n.volunteerId;R(!0),u&&localStorage.setItem("newVolunteerId",u)}catch(t){console.error("Registration error:",t),d([{field:"general",message:t.message||"An unexpected error occurred"}])}finally{w(!1)}},s=a=>{var l;return(l=T.find(t=>t.field===a))==null?void 0:l.message},B=()=>e.jsxs("div",{className:"space-y-6 stagger-children",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"fade-in-blur",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),e.jsx("input",{type:"text",value:r.firstName,onChange:a=>i("firstName",a.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-300 ${s("firstName")?"border-red-300":"border-gray-300"}`,placeholder:"Enter your first name"}),s("firstName")&&e.jsx("p",{className:"mt-1 text-sm text-red-600 fade-in-blur",children:s("firstName")})]}),e.jsxs("div",{className:"fade-in-blur",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",value:r.lastName,onChange:a=>i("lastName",a.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-300 ${s("lastName")?"border-red-300":"border-gray-300"}`,placeholder:"Enter your last name"}),s("lastName")&&e.jsx("p",{className:"mt-1 text-sm text-red-600 fade-in-blur",children:s("lastName")})]})]}),e.jsxs("div",{className:"fade-in-blur",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",value:r.email,onChange:a=>i("email",a.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-300 ${s("email")?"border-red-300":"border-gray-300"}`,placeholder:"Enter your email address"}),s("email")&&e.jsx("p",{className:"mt-1 text-sm text-red-600 fade-in-blur",children:s("email")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"fade-in-blur",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),e.jsx("input",{type:"tel",value:r.phone,onChange:a=>i("phone",a.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-300 ${s("phone")?"border-red-300":"border-gray-300"}`,placeholder:"01X-XXXXXXXX"}),s("phone")&&e.jsx("p",{className:"mt-1 text-sm text-red-600 fade-in-blur",children:s("phone")})]}),e.jsxs("div",{className:"fade-in-blur",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Personal ID *"}),e.jsx("input",{type:"text",value:r.personalId,onChange:a=>i("personalId",a.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-300 ${s("personalId")?"border-red-300":"border-gray-300"}`,placeholder:"14-digit Egyptian ID",maxLength:14}),s("personalId")&&e.jsx("p",{className:"mt-1 text-sm text-red-600 fade-in-blur",children:s("personalId")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"fade-in-blur",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Faculty *"}),e.jsxs("select",{value:r.faculty,onChange:a=>i("faculty",a.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-300 ${s("faculty")?"border-red-300":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select faculty"}),re.map(a=>e.jsx("option",{value:a,children:a},a))]}),s("faculty")&&e.jsx("p",{className:"mt-1 text-sm text-red-600 fade-in-blur",children:s("faculty")})]}),e.jsxs("div",{className:"fade-in-blur",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender *"}),e.jsxs("select",{value:r.gender,onChange:a=>i("gender",a.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-300 ${s("gender")?"border-red-300":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select gender"}),D.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]}),s("gender")&&e.jsx("p",{className:"mt-1 text-sm text-red-600 fade-in-blur",children:s("gender")})]})]})]}),M=()=>e.jsxs("div",{className:"space-y-6 stagger-children",children:[e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-6 fade-in-blur",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(h,{className:"h-6 w-6 text-orange-600 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-orange-900",children:"Volunteer Role Selection"})]}),e.jsx("p",{className:"text-orange-800",children:"Please select the volunteer role you're interested in. This helps us assign you to the most suitable position."})]}),e.jsxs("div",{className:"fade-in-blur",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Preferred Volunteer Role *"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:$.map(a=>e.jsxs("label",{className:`relative flex cursor-pointer rounded-lg border p-4 focus:outline-none transition-all duration-300 ${r.role===a.value?"border-orange-500 bg-orange-50 transform scale-[1.02]":"border-gray-300 bg-white hover:bg-gray-50 smooth-hover"}`,children:[e.jsx("input",{type:"radio",name:"role",value:a.value,checked:r.role===a.value,onChange:l=>i("role",l.target.value),className:"sr-only"}),e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"font-medium text-gray-900",children:a.label})}),e.jsx("div",{className:`flex-shrink-0 transition-colors duration-300 ${r.role===a.value?"text-orange-600":"text-gray-300"}`,children:e.jsx(I,{className:"h-6 w-6"})})]})]},a.value))}),s("role")&&e.jsx("p",{className:"mt-2 text-sm text-red-600 fade-in-blur",children:s("role")})]}),r.role==="team_leader"&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 fade-in-scale",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(se,{className:"h-6 w-6 text-blue-600 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Team Leadership"})]}),e.jsx("p",{className:"text-blue-800 mb-4",children:"As a Team Leader, please select which team you will be leading. This helps us organize the volunteer structure."}),e.jsxs("div",{className:"fade-in-blur",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Team to Lead *"}),e.jsxs("select",{value:r.tl_team,onChange:a=>i("tl_team",a.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 ${s("tl_team")?"border-red-300":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select team"}),A.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]}),s("tl_team")&&e.jsx("p",{className:"mt-1 text-sm text-red-600 fade-in-blur",children:s("tl_team")})]})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 fade-in-blur",children:e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:"Note:"})," Specific role assignments and team placements will be confirmed by the event organizers after registration."]})})]}),U=()=>e.jsxs("div",{className:"space-y-6 stagger-children",children:[e.jsxs("div",{className:"fade-in-blur",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),e.jsx("input",{type:"password",value:r.password,onChange:a=>i("password",a.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-300 ${s("password")?"border-red-300":"border-gray-300"}`,placeholder:"Enter your password (minimum 6 characters)"}),s("password")&&e.jsx("p",{className:"mt-1 text-sm text-red-600 fade-in-blur",children:s("password")})]}),e.jsxs("div",{className:"fade-in-blur",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password *"}),e.jsx("input",{type:"password",value:r.confirmPassword,onChange:a=>i("confirmPassword",a.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-300 ${s("confirmPassword")?"border-red-300":"border-gray-300"}`,placeholder:"Confirm your password"}),s("confirmPassword")&&e.jsx("p",{className:"mt-1 text-sm text-red-600 fade-in-blur",children:s("confirmPassword")})]})]}),z=()=>{switch(o){case 1:return B();case 2:return M();case 3:return U();default:return null}};if(f)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center fade-in-scale",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(_){const a=localStorage.getItem("newVolunteerId");return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-white flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-center border border-orange-100 fade-in-scale modal-content-blur",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4 fade-in-scale",children:e.jsx(I,{className:"w-8 h-8 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4 fade-in-blur",children:"Volunteer Registration Successful!"}),a&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg fade-in-blur",children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Your Volunteer ID:"}),e.jsx("p",{className:"text-lg font-bold text-blue-900",children:a}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Please save this ID for future reference"})]}),e.jsx("p",{className:"text-gray-600 mb-6 fade-in-blur",children:"Your account has been created successfully. You can now log in to access your volunteer dashboard."}),e.jsx("button",{onClick:()=>{localStorage.removeItem("newVolunteerId"),g("/login")},className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white py-3 px-4 rounded-lg font-medium hover:from-orange-600 hover:to-orange-700 transition-all duration-300 transform hover:scale-105 smooth-hover fade-in-blur",children:"Go to Login"})]})})}return e.jsxs("div",{className:"min-h-screen relative",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat z-0",style:{backgroundImage:'url("https://ypiwfedtvgmazqcwolac.supabase.co/storage/v1/object/public/Assets/careercenter.png")'},children:e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-10"})}),e.jsxs("div",{className:"relative z-10 py-8 px-4",children:[e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"text-center mb-8 fade-in-up-blur",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx(h,{className:"h-12 w-12 text-white mr-3 drop-shadow-lg"}),e.jsx("h1",{className:"text-4xl font-bold text-white drop-shadow-lg",children:"Volunteer Registration"})]}),e.jsx("p",{className:"text-white drop-shadow",children:"Join our amazing volunteer team and help make Career Week unforgettable!"})]})}),e.jsxs("div",{className:"mb-8 fade-in-up-blur",children:[e.jsx("div",{className:"flex items-center max-w-2xl mx-auto",children:x.map((a,l)=>e.jsxs(O.Fragment,{children:[e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 transition-all duration-300 ${o>=a.id?"bg-orange-500 border-orange-500 text-white transform scale-110":"bg-white border-gray-300 text-gray-400"}`,children:e.jsx(a.icon,{className:"w-5 h-5"})})}),l<x.length-1&&e.jsx("div",{className:`flex-1 h-0.5 mx-2 transition-all duration-300 ${o>a.id?"bg-orange-500":"bg-gray-300"}`})]},a.id))}),e.jsx("div",{className:"flex justify-between max-w-2xl mx-auto mt-2",children:x.map(a=>e.jsx("div",{className:"text-xs text-center",style:{width:"120px"},children:e.jsx("span",{className:`transition-all duration-300 ${o>=a.id?"text-white font-medium drop-shadow transform scale-105":"text-white drop-shadow"}`,children:a.title})},a.id))})]}),e.jsxs("form",{onSubmit:X,className:"bg-white rounded-2xl shadow-2xl p-8 border border-orange-100 fade-in-up-blur modal-content-blur",children:[s("general")&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center fade-in-blur",children:[e.jsx(Y,{className:"w-5 h-5 text-red-600 mr-3"}),e.jsx("p",{className:"text-red-700",children:s("general")})]}),e.jsxs("div",{className:"mb-8 fade-in-blur",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:x[o-1].title}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${o/3*100}%`}})})]}),e.jsx("div",{className:"stagger-children",children:z()}),e.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-200 fade-in-blur",children:[e.jsx("button",{type:"button",onClick:V,disabled:o===1,className:`px-6 py-3 rounded-lg font-medium transition-all duration-300 ${o===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300 smooth-hover transform hover:scale-105"}`,children:"Previous"}),o<3?e.jsxs("button",{type:"button",onClick:F,className:"px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg font-medium hover:from-orange-600 hover:to-orange-700 transition-all duration-300 transform hover:scale-105 flex items-center smooth-hover",children:["Next",e.jsx(H,{className:"w-4 h-4 ml-2"})]}):e.jsx("button",{type:"submit",disabled:y,className:"px-8 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg font-medium hover:from-orange-600 hover:to-orange-700 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center smooth-hover",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Volunteer Account..."]}):"Create Volunteer Account"})]}),e.jsx("div",{className:"text-center mt-6 pt-6 border-t border-gray-200 fade-in-blur",children:e.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",onClick:()=>g("/login"),className:"text-orange-600 hover:text-orange-700 font-medium transition-colors duration-200 hover:underline",children:"Sign in here"})]})})]})]})]})};export{oe as VolunteerRegistration};

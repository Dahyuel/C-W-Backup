import{u as b,r as l,g as N,b as y,j as e}from"./index-_PLFOake.js";import{D as h,T as v}from"./DashboardLayout-d5aGyG0Q.js";import{H as w}from"./heart-DH_IhmDA.js";import{A as u}from"./activity-CB2r4-BD.js";import{C as D}from"./clock-BkUeAAXL.js";const S=()=>{var x;const{profile:t}=b(),[r,o]=l.useState(null),[i,c]=l.useState([]),[g,d]=l.useState(!0);l.useEffect(()=>{f()},[t==null?void 0:t.id]);const f=async()=>{if(t!=null&&t.id)try{d(!0);const{data:s,error:a}=await N(t.id);a?(console.error("Error fetching volunteer stats:",a),o({score:t.score||0,rank:0,total_users:0})):s&&o(s);const{data:m,error:n}=await y(t.id,5);n?(console.error("Error fetching recent activities:",n),c([])):c(m||[])}catch(s){console.error("Error fetching dashboard data:",s),o({score:t.score||0,rank:0,total_users:0}),c([])}finally{d(!1)}},j=s=>s.split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "),p=s=>{const a=new Date(s),n=Math.floor((new Date().getTime()-a.getTime())/(1e3*60*60));return n<1?"Just now":n<24?`${n}h ago`:`${Math.floor(n/24)}d ago`};return g?e.jsx(h,{title:"Volunteer Dashboard",subtitle:"Welcome to your volunteer portal",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})})}):e.jsxs(h,{title:"Volunteer Dashboard",subtitle:`Welcome back, ${t==null?void 0:t.first_name}!`,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-orange-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Points Earned"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:(r==null?void 0:r.score)||0})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(w,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-orange-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Your Rank"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:r!=null&&r.rank?`#${r.rank}`:"N/A"}),(r==null?void 0:r.total_users)&&e.jsxs("p",{className:"text-xs text-gray-500",children:["of ",r.total_users]})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(v,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-orange-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Recent Activity"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:i.length>0?`+${((x=i[0])==null?void 0:x.points)||0}`:"0"}),i.length>0&&e.jsx("p",{className:"text-xs text-gray-500",children:"Latest points"})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(u,{className:"h-6 w-6 text-purple-600"})})]})})]}),e.jsx("div",{className:"max-w-4xl mx-auto mt-8",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-orange-100 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(D,{className:"h-5 w-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activities"})]}),i.length>0?e.jsx("div",{className:"space-y-3",children:i.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:j(s.activity_type)}),s.activity_description&&e.jsx("p",{className:"text-sm text-gray-600",children:s.activity_description}),e.jsx("p",{className:"text-xs text-gray-500",children:p(s.awarded_at)})]}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${s.points>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[s.points>0?"+":"",s.points," pts"]})})]},s.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(u,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No recent activities"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Start participating to earn points and see your activities here!"})]})]})}),e.jsx("div",{className:"max-w-4xl mx-auto mt-8 text-center",children:e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-orange-100 rounded-xl p-6 border border-orange-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Volunteer Information"}),e.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["Thank you for your dedication and hard work! Your contributions make this event possible.",e.jsx("br",{}),"If anything comes up, refer to your team leader."]}),(t==null?void 0:t.volunteer_id)&&e.jsxs("div",{className:"mt-4 inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-orange-200 text-orange-800",children:["ID: ",t.volunteer_id]})]})})]})};export{S as VolunteerDashboard};

import{o as T,r as E,s as H,j as r,d as V,U as Je,u as Mt,A as St,C as Pt,B as ze,E as He}from"./index-_PLFOake.js";import{H as Ye}from"./heart-DH_IhmDA.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=T("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=T("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=T("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=T("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=T("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=T("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=T("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=T("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=T("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=T("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=T("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=T("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var X={},Lt=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Xe={},B={};let Ee;const Rt=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];B.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17};B.getSymbolTotalCodewords=function(n){return Rt[n]};B.getBCHDigit=function(t){let n=0;for(;t!==0;)n++,t>>>=1;return n};B.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');Ee=n};B.isKanjiModeEnabled=function(){return typeof Ee<"u"};B.toSJIS=function(n){return Ee(n)};var ae={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function n(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+o)}}t.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4},t.from=function(e,s){if(t.isValid(e))return e;try{return n(e)}catch{return s}}})(ae);function Ze(){this.buffer=[],this.length=0}Ze.prototype={get:function(t){const n=Math.floor(t/8);return(this.buffer[n]>>>7-t%8&1)===1},put:function(t,n){for(let o=0;o<n;o++)this.putBit((t>>>n-o-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),t&&(this.buffer[n]|=128>>>this.length%8),this.length++}};var Dt=Ze;function Z(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Z.prototype.set=function(t,n,o,e){const s=t*this.size+n;this.data[s]=o,e&&(this.reservedBit[s]=!0)};Z.prototype.get=function(t,n){return this.data[t*this.size+n]};Z.prototype.xor=function(t,n,o){this.data[t*this.size+n]^=o};Z.prototype.isReserved=function(t,n){return this.reservedBit[t*this.size+n]};var Ut=Z,et={};(function(t){const n=B.getSymbolSize;t.getRowColCoords=function(e){if(e===1)return[];const s=Math.floor(e/7)+2,a=n(e),i=a===145?26:Math.ceil((a-13)/(2*s-2))*2,c=[a-7];for(let l=1;l<s-1;l++)c[l]=c[l-1]-i;return c.push(6),c.reverse()},t.getPositions=function(e){const s=[],a=t.getRowColCoords(e),i=a.length;for(let c=0;c<i;c++)for(let l=0;l<i;l++)c===0&&l===0||c===0&&l===i-1||c===i-1&&l===0||s.push([a[c],a[l]]);return s}})(et);var tt={};const Ft=B.getSymbolSize,$e=7;tt.getPositions=function(n){const o=Ft(n);return[[0,0],[o-$e,0],[0,o-$e]]};var nt={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n={N1:3,N2:3,N3:40,N4:10};t.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},t.from=function(s){return t.isValid(s)?parseInt(s,10):void 0},t.getPenaltyN1=function(s){const a=s.size;let i=0,c=0,l=0,u=null,h=null;for(let v=0;v<a;v++){c=l=0,u=h=null;for(let w=0;w<a;w++){let m=s.get(v,w);m===u?c++:(c>=5&&(i+=n.N1+(c-5)),u=m,c=1),m=s.get(w,v),m===h?l++:(l>=5&&(i+=n.N1+(l-5)),h=m,l=1)}c>=5&&(i+=n.N1+(c-5)),l>=5&&(i+=n.N1+(l-5))}return i},t.getPenaltyN2=function(s){const a=s.size;let i=0;for(let c=0;c<a-1;c++)for(let l=0;l<a-1;l++){const u=s.get(c,l)+s.get(c,l+1)+s.get(c+1,l)+s.get(c+1,l+1);(u===4||u===0)&&i++}return i*n.N2},t.getPenaltyN3=function(s){const a=s.size;let i=0,c=0,l=0;for(let u=0;u<a;u++){c=l=0;for(let h=0;h<a;h++)c=c<<1&2047|s.get(u,h),h>=10&&(c===1488||c===93)&&i++,l=l<<1&2047|s.get(h,u),h>=10&&(l===1488||l===93)&&i++}return i*n.N3},t.getPenaltyN4=function(s){let a=0;const i=s.data.length;for(let l=0;l<i;l++)a+=s.data[l];return Math.abs(Math.ceil(a*100/i/5)-10)*n.N4};function o(e,s,a){switch(e){case t.Patterns.PATTERN000:return(s+a)%2===0;case t.Patterns.PATTERN001:return s%2===0;case t.Patterns.PATTERN010:return a%3===0;case t.Patterns.PATTERN011:return(s+a)%3===0;case t.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(a/3))%2===0;case t.Patterns.PATTERN101:return s*a%2+s*a%3===0;case t.Patterns.PATTERN110:return(s*a%2+s*a%3)%2===0;case t.Patterns.PATTERN111:return(s*a%3+(s+a)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}t.applyMask=function(s,a){const i=a.size;for(let c=0;c<i;c++)for(let l=0;l<i;l++)a.isReserved(l,c)||a.xor(l,c,o(s,l,c))},t.getBestMask=function(s,a){const i=Object.keys(t.Patterns).length;let c=0,l=1/0;for(let u=0;u<i;u++){a(u),t.applyMask(u,s);const h=t.getPenaltyN1(s)+t.getPenaltyN2(s)+t.getPenaltyN3(s)+t.getPenaltyN4(s);t.applyMask(u,s),h<l&&(l=h,c=u)}return c}})(nt);var oe={};const U=ae,te=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ne=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];oe.getBlocksCount=function(n,o){switch(o){case U.L:return te[(n-1)*4+0];case U.M:return te[(n-1)*4+1];case U.Q:return te[(n-1)*4+2];case U.H:return te[(n-1)*4+3];default:return}};oe.getTotalCodewordsCount=function(n,o){switch(o){case U.L:return ne[(n-1)*4+0];case U.M:return ne[(n-1)*4+1];case U.Q:return ne[(n-1)*4+2];case U.H:return ne[(n-1)*4+3];default:return}};var rt={},ie={};const G=new Uint8Array(512),re=new Uint8Array(256);(function(){let n=1;for(let o=0;o<255;o++)G[o]=n,re[n]=o,n<<=1,n&256&&(n^=285);for(let o=255;o<512;o++)G[o]=G[o-255]})();ie.log=function(n){if(n<1)throw new Error("log("+n+")");return re[n]};ie.exp=function(n){return G[n]};ie.mul=function(n,o){return n===0||o===0?0:G[re[n]+re[o]]};(function(t){const n=ie;t.mul=function(e,s){const a=new Uint8Array(e.length+s.length-1);for(let i=0;i<e.length;i++)for(let c=0;c<s.length;c++)a[i+c]^=n.mul(e[i],s[c]);return a},t.mod=function(e,s){let a=new Uint8Array(e);for(;a.length-s.length>=0;){const i=a[0];for(let l=0;l<s.length;l++)a[l]^=n.mul(s[l],i);let c=0;for(;c<a.length&&a[c]===0;)c++;a=a.slice(c)}return a},t.generateECPolynomial=function(e){let s=new Uint8Array([1]);for(let a=0;a<e;a++)s=t.mul(s,new Uint8Array([1,n.exp(a)]));return s}})(rt);const st=rt;function ke(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}ke.prototype.initialize=function(n){this.degree=n,this.genPoly=st.generateECPolynomial(this.degree)};ke.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const o=new Uint8Array(n.length+this.degree);o.set(n);const e=st.mod(o,this.genPoly),s=this.degree-e.length;if(s>0){const a=new Uint8Array(this.degree);return a.set(e,s),a}return e};var zt=ke,at={},F={},Me={};Me.isValid=function(n){return!isNaN(n)&&n>=1&&n<=40};var R={};const ot="[0-9]+",Ht="[A-Z $%*+\\-./:]+";let W="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";W=W.replace(/u/g,"\\u");const Vt="(?:(?![A-Z0-9 $%*+\\-./:]|"+W+`)(?:.|[\r
]))+`;R.KANJI=new RegExp(W,"g");R.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");R.BYTE=new RegExp(Vt,"g");R.NUMERIC=new RegExp(ot,"g");R.ALPHANUMERIC=new RegExp(Ht,"g");const qt=new RegExp("^"+W+"$"),$t=new RegExp("^"+ot+"$"),Ot=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");R.testKanji=function(n){return qt.test(n)};R.testNumeric=function(n){return $t.test(n)};R.testAlphanumeric=function(n){return Ot.test(n)};(function(t){const n=Me,o=R;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(a,i){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!n.isValid(i))throw new Error("Invalid version: "+i);return i>=1&&i<10?a.ccBits[0]:i<27?a.ccBits[1]:a.ccBits[2]},t.getBestModeForData=function(a){return o.testNumeric(a)?t.NUMERIC:o.testAlphanumeric(a)?t.ALPHANUMERIC:o.testKanji(a)?t.KANJI:t.BYTE},t.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},t.isValid=function(a){return a&&a.bit&&a.ccBits};function e(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+s)}}t.from=function(a,i){if(t.isValid(a))return a;try{return e(a)}catch{return i}}})(F);(function(t){const n=B,o=oe,e=ae,s=F,a=Me,i=7973,c=n.getBCHDigit(i);function l(w,m,y){for(let p=1;p<=40;p++)if(m<=t.getCapacity(p,y,w))return p}function u(w,m){return s.getCharCountIndicator(w,m)+4}function h(w,m){let y=0;return w.forEach(function(p){const j=u(p.mode,m);y+=j+p.getBitsLength()}),y}function v(w,m){for(let y=1;y<=40;y++)if(h(w,y)<=t.getCapacity(y,m,s.MIXED))return y}t.from=function(m,y){return a.isValid(m)?parseInt(m,10):y},t.getCapacity=function(m,y,p){if(!a.isValid(m))throw new Error("Invalid QR Code version");typeof p>"u"&&(p=s.BYTE);const j=n.getSymbolTotalCodewords(m),g=o.getTotalCodewordsCount(m,y),b=(j-g)*8;if(p===s.MIXED)return b;const d=b-u(p,m);switch(p){case s.NUMERIC:return Math.floor(d/10*3);case s.ALPHANUMERIC:return Math.floor(d/11*2);case s.KANJI:return Math.floor(d/13);case s.BYTE:default:return Math.floor(d/8)}},t.getBestVersionForData=function(m,y){let p;const j=e.from(y,e.M);if(Array.isArray(m)){if(m.length>1)return v(m,j);if(m.length===0)return 1;p=m[0]}else p=m;return l(p.mode,p.getLength(),j)},t.getEncodedBits=function(m){if(!a.isValid(m)||m<7)throw new Error("Invalid QR Code version");let y=m<<12;for(;n.getBCHDigit(y)-c>=0;)y^=i<<n.getBCHDigit(y)-c;return m<<12|y}})(at);var it={};const Ne=B,lt=1335,Kt=21522,Oe=Ne.getBCHDigit(lt);it.getEncodedBits=function(n,o){const e=n.bit<<3|o;let s=e<<10;for(;Ne.getBCHDigit(s)-Oe>=0;)s^=lt<<Ne.getBCHDigit(s)-Oe;return(e<<10|s)^Kt};var ct={};const Jt=F;function q(t){this.mode=Jt.NUMERIC,this.data=t.toString()}q.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)};q.prototype.getLength=function(){return this.data.length};q.prototype.getBitsLength=function(){return q.getBitsLength(this.data.length)};q.prototype.write=function(n){let o,e,s;for(o=0;o+3<=this.data.length;o+=3)e=this.data.substr(o,3),s=parseInt(e,10),n.put(s,10);const a=this.data.length-o;a>0&&(e=this.data.substr(o),s=parseInt(e,10),n.put(s,a*3+1))};var Yt=q;const Qt=F,xe=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function $(t){this.mode=Qt.ALPHANUMERIC,this.data=t}$.getBitsLength=function(n){return 11*Math.floor(n/2)+6*(n%2)};$.prototype.getLength=function(){return this.data.length};$.prototype.getBitsLength=function(){return $.getBitsLength(this.data.length)};$.prototype.write=function(n){let o;for(o=0;o+2<=this.data.length;o+=2){let e=xe.indexOf(this.data[o])*45;e+=xe.indexOf(this.data[o+1]),n.put(e,11)}this.data.length%2&&n.put(xe.indexOf(this.data[o]),6)};var Gt=$;const Wt=F;function O(t){this.mode=Wt.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}O.getBitsLength=function(n){return n*8};O.prototype.getLength=function(){return this.data.length};O.prototype.getBitsLength=function(){return O.getBitsLength(this.data.length)};O.prototype.write=function(t){for(let n=0,o=this.data.length;n<o;n++)t.put(this.data[n],8)};var Xt=O;const Zt=F,en=B;function K(t){this.mode=Zt.KANJI,this.data=t}K.getBitsLength=function(n){return n*13};K.prototype.getLength=function(){return this.data.length};K.prototype.getBitsLength=function(){return K.getBitsLength(this.data.length)};K.prototype.write=function(t){let n;for(n=0;n<this.data.length;n++){let o=en.toSJIS(this.data[n]);if(o>=33088&&o<=40956)o-=33088;else if(o>=57408&&o<=60351)o-=49472;else throw new Error("Invalid SJIS character: "+this.data[n]+`
Make sure your charset is UTF-8`);o=(o>>>8&255)*192+(o&255),t.put(o,13)}};var tn=K,dt={exports:{}};(function(t){var n={single_source_shortest_paths:function(o,e,s){var a={},i={};i[e]=0;var c=n.PriorityQueue.make();c.push(e,0);for(var l,u,h,v,w,m,y,p,j;!c.empty();){l=c.pop(),u=l.value,v=l.cost,w=o[u]||{};for(h in w)w.hasOwnProperty(h)&&(m=w[h],y=v+m,p=i[h],j=typeof i[h]>"u",(j||p>y)&&(i[h]=y,c.push(h,y),a[h]=u))}if(typeof s<"u"&&typeof i[s]>"u"){var g=["Could not find a path from ",e," to ",s,"."].join("");throw new Error(g)}return a},extract_shortest_path_from_predecessor_list:function(o,e){for(var s=[],a=e;a;)s.push(a),o[a],a=o[a];return s.reverse(),s},find_path:function(o,e,s){var a=n.single_source_shortest_paths(o,e,s);return n.extract_shortest_path_from_predecessor_list(a,s)},PriorityQueue:{make:function(o){var e=n.PriorityQueue,s={},a;o=o||{};for(a in e)e.hasOwnProperty(a)&&(s[a]=e[a]);return s.queue=[],s.sorter=o.sorter||e.default_sorter,s},default_sorter:function(o,e){return o.cost-e.cost},push:function(o,e){var s={value:o,cost:e};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=n})(dt);var nn=dt.exports;(function(t){const n=F,o=Yt,e=Gt,s=Xt,a=tn,i=R,c=B,l=nn;function u(g){return unescape(encodeURIComponent(g)).length}function h(g,b,d){const f=[];let N;for(;(N=g.exec(d))!==null;)f.push({data:N[0],index:N.index,mode:b,length:N[0].length});return f}function v(g){const b=h(i.NUMERIC,n.NUMERIC,g),d=h(i.ALPHANUMERIC,n.ALPHANUMERIC,g);let f,N;return c.isKanjiModeEnabled()?(f=h(i.BYTE,n.BYTE,g),N=h(i.KANJI,n.KANJI,g)):(f=h(i.BYTE_KANJI,n.BYTE,g),N=[]),b.concat(d,f,N).sort(function(k,S){return k.index-S.index}).map(function(k){return{data:k.data,mode:k.mode,length:k.length}})}function w(g,b){switch(b){case n.NUMERIC:return o.getBitsLength(g);case n.ALPHANUMERIC:return e.getBitsLength(g);case n.KANJI:return a.getBitsLength(g);case n.BYTE:return s.getBitsLength(g)}}function m(g){return g.reduce(function(b,d){const f=b.length-1>=0?b[b.length-1]:null;return f&&f.mode===d.mode?(b[b.length-1].data+=d.data,b):(b.push(d),b)},[])}function y(g){const b=[];for(let d=0;d<g.length;d++){const f=g[d];switch(f.mode){case n.NUMERIC:b.push([f,{data:f.data,mode:n.ALPHANUMERIC,length:f.length},{data:f.data,mode:n.BYTE,length:f.length}]);break;case n.ALPHANUMERIC:b.push([f,{data:f.data,mode:n.BYTE,length:f.length}]);break;case n.KANJI:b.push([f,{data:f.data,mode:n.BYTE,length:u(f.data)}]);break;case n.BYTE:b.push([{data:f.data,mode:n.BYTE,length:u(f.data)}])}}return b}function p(g,b){const d={},f={start:{}};let N=["start"];for(let C=0;C<g.length;C++){const k=g[C],S=[];for(let I=0;I<k.length;I++){const _=k[I],A=""+C+I;S.push(A),d[A]={node:_,lastCount:0},f[A]={};for(let D=0;D<N.length;D++){const P=N[D];d[P]&&d[P].node.mode===_.mode?(f[P][A]=w(d[P].lastCount+_.length,_.mode)-w(d[P].lastCount,_.mode),d[P].lastCount+=_.length):(d[P]&&(d[P].lastCount=_.length),f[P][A]=w(_.length,_.mode)+4+n.getCharCountIndicator(_.mode,b))}}N=S}for(let C=0;C<N.length;C++)f[N[C]].end=0;return{map:f,table:d}}function j(g,b){let d;const f=n.getBestModeForData(g);if(d=n.from(b,f),d!==n.BYTE&&d.bit<f.bit)throw new Error('"'+g+'" cannot be encoded with mode '+n.toString(d)+`.
 Suggested mode is: `+n.toString(f));switch(d===n.KANJI&&!c.isKanjiModeEnabled()&&(d=n.BYTE),d){case n.NUMERIC:return new o(g);case n.ALPHANUMERIC:return new e(g);case n.KANJI:return new a(g);case n.BYTE:return new s(g)}}t.fromArray=function(b){return b.reduce(function(d,f){return typeof f=="string"?d.push(j(f,null)):f.data&&d.push(j(f.data,f.mode)),d},[])},t.fromString=function(b,d){const f=v(b,c.isKanjiModeEnabled()),N=y(f),C=p(N,d),k=l.find_path(C.map,"start","end"),S=[];for(let I=1;I<k.length-1;I++)S.push(C.table[k[I]].node);return t.fromArray(m(S))},t.rawSplit=function(b){return t.fromArray(v(b,c.isKanjiModeEnabled()))}})(ct);const le=B,we=ae,rn=Dt,sn=Ut,an=et,on=tt,je=nt,Ce=oe,ln=zt,se=at,cn=it,dn=F,ye=ct;function un(t,n){const o=t.size,e=on.getPositions(n);for(let s=0;s<e.length;s++){const a=e[s][0],i=e[s][1];for(let c=-1;c<=7;c++)if(!(a+c<=-1||o<=a+c))for(let l=-1;l<=7;l++)i+l<=-1||o<=i+l||(c>=0&&c<=6&&(l===0||l===6)||l>=0&&l<=6&&(c===0||c===6)||c>=2&&c<=4&&l>=2&&l<=4?t.set(a+c,i+l,!0,!0):t.set(a+c,i+l,!1,!0))}}function hn(t){const n=t.size;for(let o=8;o<n-8;o++){const e=o%2===0;t.set(o,6,e,!0),t.set(6,o,e,!0)}}function fn(t,n){const o=an.getPositions(n);for(let e=0;e<o.length;e++){const s=o[e][0],a=o[e][1];for(let i=-2;i<=2;i++)for(let c=-2;c<=2;c++)i===-2||i===2||c===-2||c===2||i===0&&c===0?t.set(s+i,a+c,!0,!0):t.set(s+i,a+c,!1,!0)}}function gn(t,n){const o=t.size,e=se.getEncodedBits(n);let s,a,i;for(let c=0;c<18;c++)s=Math.floor(c/3),a=c%3+o-8-3,i=(e>>c&1)===1,t.set(s,a,i,!0),t.set(a,s,i,!0)}function be(t,n,o){const e=t.size,s=cn.getEncodedBits(n,o);let a,i;for(a=0;a<15;a++)i=(s>>a&1)===1,a<6?t.set(a,8,i,!0):a<8?t.set(a+1,8,i,!0):t.set(e-15+a,8,i,!0),a<8?t.set(8,e-a-1,i,!0):a<9?t.set(8,15-a-1+1,i,!0):t.set(8,15-a-1,i,!0);t.set(e-8,8,1,!0)}function mn(t,n){const o=t.size;let e=-1,s=o-1,a=7,i=0;for(let c=o-1;c>0;c-=2)for(c===6&&c--;;){for(let l=0;l<2;l++)if(!t.isReserved(s,c-l)){let u=!1;i<n.length&&(u=(n[i]>>>a&1)===1),t.set(s,c-l,u),a--,a===-1&&(i++,a=7)}if(s+=e,s<0||o<=s){s-=e,e=-e;break}}}function xn(t,n,o){const e=new rn;o.forEach(function(l){e.put(l.mode.bit,4),e.put(l.getLength(),dn.getCharCountIndicator(l.mode,t)),l.write(e)});const s=le.getSymbolTotalCodewords(t),a=Ce.getTotalCodewordsCount(t,n),i=(s-a)*8;for(e.getLengthInBits()+4<=i&&e.put(0,4);e.getLengthInBits()%8!==0;)e.putBit(0);const c=(i-e.getLengthInBits())/8;for(let l=0;l<c;l++)e.put(l%2?17:236,8);return wn(e,t,n)}function wn(t,n,o){const e=le.getSymbolTotalCodewords(n),s=Ce.getTotalCodewordsCount(n,o),a=e-s,i=Ce.getBlocksCount(n,o),c=e%i,l=i-c,u=Math.floor(e/i),h=Math.floor(a/i),v=h+1,w=u-h,m=new ln(w);let y=0;const p=new Array(i),j=new Array(i);let g=0;const b=new Uint8Array(t.buffer);for(let k=0;k<i;k++){const S=k<l?h:v;p[k]=b.slice(y,y+S),j[k]=m.encode(p[k]),y+=S,g=Math.max(g,S)}const d=new Uint8Array(e);let f=0,N,C;for(N=0;N<g;N++)for(C=0;C<i;C++)N<p[C].length&&(d[f++]=p[C][N]);for(N=0;N<w;N++)for(C=0;C<i;C++)d[f++]=j[C][N];return d}function yn(t,n,o,e){let s;if(Array.isArray(t))s=ye.fromArray(t);else if(typeof t=="string"){let u=n;if(!u){const h=ye.rawSplit(t);u=se.getBestVersionForData(h,o)}s=ye.fromString(t,u||40)}else throw new Error("Invalid data");const a=se.getBestVersionForData(s,o);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(!n)n=a;else if(n<a)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+a+`.
`);const i=xn(n,o,s),c=le.getSymbolSize(n),l=new sn(c);return un(l,n),hn(l),fn(l,n),be(l,o,0),n>=7&&gn(l,n),mn(l,i),isNaN(e)&&(e=je.getBestMask(l,be.bind(null,l,o))),je.applyMask(e,l),be(l,o,e),{modules:l,version:n,errorCorrectionLevel:o,maskPattern:e,segments:s}}Xe.create=function(n,o){if(typeof n>"u"||n==="")throw new Error("No input text");let e=we.M,s,a;return typeof o<"u"&&(e=we.from(o.errorCorrectionLevel,we.M),s=se.from(o.version),a=je.from(o.maskPattern),o.toSJISFunc&&le.setToSJISFunction(o.toSJISFunc)),yn(n,s,e,a)};var ut={},Se={};(function(t){function n(o){if(typeof o=="number"&&(o=o.toString()),typeof o!="string")throw new Error("Color should be defined as hex string");let e=o.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+o);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(a){return[a,a]}))),e.length===6&&e.push("F","F");const s=parseInt(e.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+e.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});const s=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,a=e.width&&e.width>=21?e.width:void 0,i=e.scale||4;return{width:a,scale:a?4:i,margin:s,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,s){return s.width&&s.width>=e+s.margin*2?s.width/(e+s.margin*2):s.scale},t.getImageWidth=function(e,s){const a=t.getScale(e,s);return Math.floor((e+s.margin*2)*a)},t.qrToImageData=function(e,s,a){const i=s.modules.size,c=s.modules.data,l=t.getScale(i,a),u=Math.floor((i+a.margin*2)*l),h=a.margin*l,v=[a.color.light,a.color.dark];for(let w=0;w<u;w++)for(let m=0;m<u;m++){let y=(w*u+m)*4,p=a.color.light;if(w>=h&&m>=h&&w<u-h&&m<u-h){const j=Math.floor((w-h)/l),g=Math.floor((m-h)/l);p=v[c[j*i+g]?1:0]}e[y++]=p.r,e[y++]=p.g,e[y++]=p.b,e[y]=p.a}}})(Se);(function(t){const n=Se;function o(s,a,i){s.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=i,a.width=i,a.style.height=i+"px",a.style.width=i+"px"}function e(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(a,i,c){let l=c,u=i;typeof l>"u"&&(!i||!i.getContext)&&(l=i,i=void 0),i||(u=e()),l=n.getOptions(l);const h=n.getImageWidth(a.modules.size,l),v=u.getContext("2d"),w=v.createImageData(h,h);return n.qrToImageData(w.data,a,l),o(v,u,h),v.putImageData(w,0,0),u},t.renderToDataURL=function(a,i,c){let l=c;typeof l>"u"&&(!i||!i.getContext)&&(l=i,i=void 0),l||(l={});const u=t.render(a,i,l),h=l.type||"image/png",v=l.rendererOpts||{};return u.toDataURL(h,v.quality)}})(ut);var ht={};const bn=Se;function Ke(t,n){const o=t.a/255,e=n+'="'+t.hex+'"';return o<1?e+" "+n+'-opacity="'+o.toFixed(2).slice(1)+'"':e}function pe(t,n,o){let e=t+n;return typeof o<"u"&&(e+=" "+o),e}function pn(t,n,o){let e="",s=0,a=!1,i=0;for(let c=0;c<t.length;c++){const l=Math.floor(c%n),u=Math.floor(c/n);!l&&!a&&(a=!0),t[c]?(i++,c>0&&l>0&&t[c-1]||(e+=a?pe("M",l+o,.5+u+o):pe("m",s,0),s=0,a=!1),l+1<n&&t[c+1]||(e+=pe("h",i),i=0)):s++}return e}ht.render=function(n,o,e){const s=bn.getOptions(o),a=n.modules.size,i=n.modules.data,c=a+s.margin*2,l=s.color.light.a?"<path "+Ke(s.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",u="<path "+Ke(s.color.dark,"stroke")+' d="'+pn(i,a,s.margin)+'"/>',h='viewBox="0 0 '+c+" "+c+'"',w='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+h+' shape-rendering="crispEdges">'+l+u+`</svg>
`;return typeof e=="function"&&e(null,w),w};const Nn=Lt,ve=Xe,ft=ut,jn=ht;function Pe(t,n,o,e,s){const a=[].slice.call(arguments,1),i=a.length,c=typeof a[i-1]=="function";if(!c&&!Nn())throw new Error("Callback required as last argument");if(c){if(i<2)throw new Error("Too few arguments provided");i===2?(s=o,o=n,n=e=void 0):i===3&&(n.getContext&&typeof s>"u"?(s=e,e=void 0):(s=e,e=o,o=n,n=void 0))}else{if(i<1)throw new Error("Too few arguments provided");return i===1?(o=n,n=e=void 0):i===2&&!n.getContext&&(e=o,o=n,n=void 0),new Promise(function(l,u){try{const h=ve.create(o,e);l(t(h,n,e))}catch(h){u(h)}})}try{const l=ve.create(o,e);s(null,t(l,n,e))}catch(l){s(l)}}X.create=ve.create;X.toCanvas=Pe.bind(null,ft.render);X.toDataURL=Pe.bind(null,ft.renderToDataURL);X.toString=Pe.bind(null,function(t,n,o){return jn.render(t,o)});const Cn=({userRole:t,currentUserId:n})=>{var g,b;const[o,e]=E.useState([]),[s,a]=E.useState("attendees"),[i,c]=E.useState(!0),[l,u]=E.useState(null);E.useEffect(()=>{h()},[t,s]);const h=async()=>{c(!0),u(null);try{let d=H.from("users_profiles").select("id, first_name, last_name, role, score").order("score",{ascending:!1});t==="admin"?s==="attendees"?d=d.eq("role","attendee"):s==="volunteers"?d=d.in("role",["volunteer","registration","building","info_desk"]):d=d.eq("role","team_leader"):t==="attendee"?d=d.eq("role","attendee"):t==="team_leader"?d=d.eq("role","team_leader"):d=d.in("role",["volunteer","registration","building","info_desk"]);const{data:f,error:N}=await d;if(N){console.error("Error fetching leaderboard:",N),u("Failed to load leaderboard");return}const C=(f||[]).map((k,S)=>({...k,rank:S+1}));e(C)}catch(d){console.error("Error fetching leaderboard:",d),u("An error occurred while loading the leaderboard")}finally{c(!1)}},v=d=>{switch(d){case 1:return r.jsx(_t,{className:"h-6 w-6 text-yellow-500"});case 2:return r.jsx(qe,{className:"h-6 w-6 text-gray-400"});case 3:return r.jsx(qe,{className:"h-6 w-6 text-amber-600"});default:return r.jsxs("div",{className:"w-6 h-6 flex items-center justify-center text-sm font-bold text-gray-500",children:["#",d]})}},w=d=>{switch(d){case"attendee":return r.jsx(V,{className:"h-4 w-4"});case"volunteer":return r.jsx(Ye,{className:"h-4 w-4"});case"registration":return r.jsx(We,{className:"h-4 w-4"});case"building":return r.jsx(Qe,{className:"h-4 w-4"});case"team_leader":return r.jsx(Je,{className:"h-4 w-4"});case"admin":return r.jsx(Ge,{className:"h-4 w-4"});case"info_desk":return r.jsx(V,{className:"h-4 w-4"});default:return r.jsx(V,{className:"h-4 w-4"})}},m=d=>{switch(d){case"attendee":return"bg-blue-100 text-blue-800";case"volunteer":return"bg-pink-100 text-pink-800";case"registration":return"bg-green-100 text-green-800";case"building":return"bg-purple-100 text-purple-800";case"team_leader":return"bg-indigo-100 text-indigo-800";case"admin":return"bg-red-100 text-red-800";case"info_desk":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},y=(d,f)=>{if(f)return"bg-orange-50 border-orange-200";switch(d){case 1:return"bg-yellow-50 border-yellow-200";case 2:return"bg-gray-50 border-gray-200";case 3:return"bg-amber-50 border-amber-200";default:return"bg-white border-gray-200"}},p=()=>t==="admin"?s==="attendees"?"Top Attendees":s==="volunteers"?"Top Volunteers":"Top Team Leaders":t==="attendee"?"Top Attendees":t==="team_leader"?"Top Team Leaders":"Top Performers",j=o.find(d=>d.id===n);return i?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}):l?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-red-600",children:l}),r.jsx("button",{onClick:h,className:"mt-4 bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:"Try Again"})]}):r.jsxs("div",{className:"w-full",children:[t==="admin"&&r.jsxs("div",{className:"flex space-x-4 mb-6 border-b",children:[r.jsx("button",{onClick:()=>a("attendees"),className:`py-2 px-4 font-semibold text-sm ${s==="attendees"?"border-b-2 border-orange-500 text-orange-600":"text-gray-500 hover:text-orange-600"}`,children:"Attendees"}),r.jsx("button",{onClick:()=>a("volunteers"),className:`py-2 px-4 font-semibold text-sm ${s==="volunteers"?"border-b-2 border-orange-500 text-orange-600":"text-gray-500 hover:text-orange-600"}`,children:"Volunteers"}),r.jsx("button",{onClick:()=>a("team_leaders"),className:`py-2 px-4 font-semibold text-sm ${s==="team_leaders"?"border-b-2 border-orange-500 text-orange-600":"text-gray-500 hover:text-orange-600"}`,children:"Team Leaders"})]}),j&&r.jsxs("div",{className:"mb-6 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[r.jsxs("h3",{className:"text-sm font-medium text-orange-800 mb-2 flex items-center",children:[r.jsx(It,{className:"h-4 w-4 mr-2"}),"Your Position"]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[v(j.rank),r.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-500 to-orange-600 rounded-full flex items-center justify-center",children:r.jsxs("span",{className:"text-white font-medium text-sm",children:[(g=j.first_name)==null?void 0:g.charAt(0),(b=j.last_name)==null?void 0:b.charAt(0)]})}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-gray-900",children:[j.first_name," ",j.last_name]}),r.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${m(j.role)}`,children:[w(j.role),r.jsx("span",{className:"ml-1 capitalize",children:j.role.replace("_"," ")})]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:j.score}),r.jsx("p",{className:"text-xs text-gray-500",children:"points"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[r.jsx(Q,{className:"h-5 w-5 mr-2 text-orange-600"}),p()]}),r.jsxs("p",{className:"text-sm text-gray-500",children:[o.length," participants"]})]}),o.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Q,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No data available"})]}):r.jsx("div",{className:"space-y-3",children:o.map(d=>{var N,C;const f=d.id===n;return r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border transition-all ${y(d.rank,f)} ${f?"ring-2 ring-orange-300":""}`,children:[r.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[v(d.rank),r.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-500 to-orange-600 rounded-full flex items-center justify-center",children:r.jsxs("span",{className:"text-white font-medium text-sm",children:[(N=d.first_name)==null?void 0:N.charAt(0),(C=d.last_name)==null?void 0:C.charAt(0)]})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"flex items-center space-x-2",children:r.jsxs("p",{className:`font-medium ${f?"text-orange-900":"text-gray-900"}`,children:[d.first_name," ",d.last_name,f&&r.jsx("span",{className:"text-orange-600 text-sm ml-2",children:"(You)"})]})}),r.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium mt-1 ${m(d.role)}`,children:[w(d.role),r.jsx("span",{className:"ml-1 capitalize",children:d.role.replace("_"," ")})]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:`text-xl font-bold ${f||d.rank<=3?"text-orange-600":"text-gray-900"}`,children:d.score}),r.jsx("p",{className:"text-xs text-gray-500",children:"points"})]})]},d.id)})})]})]})},kn=({children:t,title:n,subtitle:o})=>{var Re,De,Ue;const{profile:e,signOut:s}=Mt(),[a,i]=E.useState(!1),[c,l]=E.useState(!1),[u,h]=E.useState(!1),[v,w]=E.useState(!1),[m,y]=E.useState(!1),[p,j]=E.useState(!1),[g,b]=E.useState(null),[d,f]=E.useState(""),[N,C]=E.useState(!1),[k,S]=E.useState([]),[I,_]=E.useState(0),[A,D]=E.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[P,Be]=E.useState({old:!1,new:!1,confirm:!1}),[_e,Ae]=E.useState(!1),[Te,z]=E.useState(null),[Ie,J]=E.useState(null),[ce,Le]=E.useState(!1),de=E.useRef(null),ue=E.useRef(null),he=E.useRef(null);E.useEffect(()=>{gt(),mt()},[e==null?void 0:e.id]),E.useEffect(()=>{const x=M=>{de.current&&!de.current.contains(M.target)&&i(!1),ue.current&&!ue.current.contains(M.target)&&l(!1),u&&he.current&&!he.current.contains(M.target)&&(h(!1),f(""))};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[u]),E.useEffect(()=>{u&&(e!=null&&e.id)&&xt()},[u,e==null?void 0:e.id]);const gt=async()=>{if(e!=null&&e.id)try{const{data:x,error:M}=await H.from("user_notifications").select(`
          notification_id,
          is_read,
          read_at
        `).eq("user_id",e.id).order("read_at",{ascending:!1}).limit(10);if(M){console.error("Error fetching user notifications:",M);return}if(!x||x.length===0){S([]);return}const ge=x.map(L=>L.notification_id),{data:Y,error:Fe}=await H.from("notifications").select(`
          id,
          title,
          message,
          created_by,
          created_at,
          users_profiles!notifications_created_by_fkey (
            first_name,
            last_name
          )
        `).in("id",ge).order("created_at",{ascending:!1});if(Fe){console.error("Error fetching notification details:",Fe);return}const Et=Y.map(L=>{const me=x.find(kt=>kt.notification_id===L.id);return{id:L.id,title:L.title||"",message:L.message||"",sender:L.users_profiles?`${L.users_profiles.first_name} ${L.users_profiles.last_name}`:"System",created_at:L.created_at||"",is_read:(me==null?void 0:me.is_read)||!1}});S(Et)}catch(x){console.error("Error fetching notifications:",x)}},mt=async()=>{if(e!=null&&e.id)try{const{data:x,error:M}=await H.from("users_profiles").select("score").eq("id",e.id).single();M?console.error("Error fetching user score:",M):x&&_(x.score||0)}catch(x){console.error("Error fetching user score:",x)}},xt=async()=>{if(e!=null&&e.id){C(!0);try{const x=await X.toDataURL(e.id,{width:200,margin:2,color:{dark:"#000000",light:"#FFFFFF"},errorCorrectionLevel:"M"});f(x)}catch(x){console.error("Error generating QR code:",x),f("")}finally{C(!1)}}},wt=async()=>{if(!ce){Le(!0),i(!1);try{console.log("🔄 Initiating logout..."),await s(),console.log("✅ Logout completed")}catch(x){console.error("❌ Logout error:",x),window.location.href="/login"}finally{Le(!1)}}},yt=()=>{h(!0),i(!1)},bt=()=>{j(!0),i(!1)},pt=x=>{b(x),y(!0),l(!1)},Nt=async x=>{try{const{error:M}=await H.from("user_notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("notification_id",x).eq("user_id",e==null?void 0:e.id);M||(S(ge=>ge.map(Y=>Y.id===x?{...Y,is_read:!0}:Y)),y(!1),b(null))}catch(M){console.error("Error marking notification as read:",M)}},jt=async x=>{if(x.preventDefault(),z(null),J(null),A.newPassword!==A.confirmPassword){z("New passwords do not match");return}if(A.newPassword.length<6){z("New password must be at least 6 characters long");return}Ae(!0);try{const{error:M}=await H.auth.updateUser({password:A.newPassword});M?z(M.message||"Failed to update password. Please try again."):(J("Password updated successfully!"),D({oldPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>{w(!1),J(null)},2e3))}catch{z("An unexpected error occurred. Please try again.")}finally{Ae(!1)}},Ct=()=>{switch(e==null?void 0:e.role){case"attendee":return r.jsx(V,{className:"h-5 w-5"});case"volunteer":return r.jsx(Ye,{className:"h-5 w-5"});case"registration":return r.jsx(We,{className:"h-5 w-5"});case"building":return r.jsx(Qe,{className:"h-5 w-5"});case"team_leader":return r.jsx(Je,{className:"h-5 w-5"});case"admin":return r.jsx(Ge,{className:"h-5 w-5"});default:return r.jsx(V,{className:"h-5 w-5"})}},vt=()=>{switch(e==null?void 0:e.role){case"attendee":return"bg-blue-100 text-blue-800";case"volunteer":return"bg-pink-100 text-pink-800";case"registration":return"bg-green-100 text-green-800";case"building":return"bg-purple-100 text-purple-800";case"team_leader":return"bg-indigo-100 text-indigo-800";case"admin":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},fe=k.filter(x=>!x.is_read).length;return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-white",children:[r.jsx("header",{className:"bg-white shadow-sm border-b border-orange-100",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center h-16",children:[r.jsx("div",{className:"flex items-center space-x-4",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("img",{src:"/src/Assets/logo.png",alt:"Career Week Logo",className:"w-8 h-8 object-contain"}),r.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Career Week"})]})}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"relative",ref:ue,children:[r.jsxs("button",{onClick:()=>l(!c),className:"relative p-2 text-gray-400 hover:text-orange-600 transition-colors","aria-label":"Notifications",children:[r.jsx(Ve,{className:"h-5 w-5"}),fe>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:fe>9?"9+":fe})]}),c&&r.jsxs("div",{className:"fixed sm:absolute right-0 left-0 sm:left-auto mt-2 mx-4 sm:mx-0 sm:w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50 max-h-96 overflow-y-auto",children:[r.jsx("div",{className:"p-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"})}),r.jsx("div",{className:"max-h-64 overflow-y-auto",children:k.length>0?k.map(x=>r.jsx("button",{onClick:()=>pt(x),className:`w-full text-left p-4 hover:bg-gray-50 border-b border-gray-100 transition-colors ${x.is_read?"":"bg-orange-50"}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:x.title}),r.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:x.message}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(x.created_at).toLocaleDateString()})]}),!x.is_read&&r.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full ml-2 mt-1 flex-shrink-0"})]})},x.id)):r.jsxs("div",{className:"p-8 text-center text-gray-500",children:[r.jsx(Ve,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),r.jsx("p",{children:"No notifications yet"})]})})]})]}),r.jsxs("div",{className:"relative",ref:de,children:[r.jsxs("button",{onClick:()=>i(!a),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 transition-colors","aria-label":"Profile menu",children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-orange-500 to-orange-600 rounded-full flex items-center justify-center",children:r.jsxs("span",{className:"text-white font-medium text-sm",children:[(Re=e==null?void 0:e.first_name)==null?void 0:Re.charAt(0),(De=e==null?void 0:e.last_name)==null?void 0:De.charAt(0)]})}),r.jsx(Bt,{className:"h-4 w-4 text-gray-400"})]}),a&&r.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:r.jsxs("div",{className:"p-2",children:[r.jsxs("button",{onClick:yt,className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[r.jsx(V,{className:"h-4 w-4 mr-3"}),"Profile"]}),r.jsxs("button",{onClick:bt,className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[r.jsx(Q,{className:"h-4 w-4 mr-3"}),"Leaderboard"]}),r.jsxs("button",{onClick:wt,disabled:ce,className:"w-full flex items-center px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(At,{className:"h-4 w-4 mr-3"}),ce?"Logging out...":"Logout"]})]})})]})]})]})})}),r.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:n}),o&&r.jsx("p",{className:"mt-2 text-gray-600",children:o})]}),t]}),u&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{ref:he,className:"bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Profile Information"}),r.jsx("button",{onClick:()=>{h(!1),f("")},className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(ee,{className:"h-6 w-6"})})]}),r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"w-48 h-48 bg-white border-2 border-gray-200 rounded-lg mx-auto mb-4 flex items-center justify-center overflow-hidden",children:N?r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto mb-2"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Generating QR Code..."})]}):d?r.jsx("img",{src:d,alt:"Profile QR Code",className:"w-full h-full object-contain"}):r.jsxs("div",{className:"text-center",children:[r.jsx(Tt,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-xs text-gray-500",children:"QR Code unavailable"})]})}),r.jsx("p",{className:"text-sm text-gray-600",children:"Show this QR code for check-ins"}),(e==null?void 0:e.id)&&r.jsxs("p",{className:"text-xs text-gray-400 mt-1 font-mono break-all px-4",children:["ID: ",e.id]})]}),r.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 mb-6 text-center",children:[r.jsxs("div",{className:"flex items-center justify-center mb-2",children:[r.jsx(Q,{className:"h-6 w-6 text-orange-600 mr-2"}),r.jsx("span",{className:"text-lg font-semibold text-orange-900",children:"Your Score"})]}),r.jsx("div",{className:"text-3xl font-bold text-orange-600",children:I})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"First Name"}),r.jsx("p",{className:"mt-1 text-sm text-gray-900",children:e==null?void 0:e.first_name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),r.jsx("p",{className:"mt-1 text-sm text-gray-900",children:e==null?void 0:e.last_name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),r.jsx("p",{className:"mt-1 text-sm text-gray-900 break-all",children:(e==null?void 0:e.email)||"Not provided"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),r.jsx("p",{className:"mt-1 text-sm text-gray-900",children:(e==null?void 0:e.phone)||"Not provided"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Personal ID"}),r.jsx("p",{className:"mt-1 text-sm text-gray-900",children:(e==null?void 0:e.personal_id)||"Not provided"})]}),(e==null?void 0:e.role)&&!["admin","attendee"].includes(e.role)&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Volunteer ID"}),r.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono",children:(e==null?void 0:e.volunteer_id)||"Not assigned"}),!(e!=null&&e.volunteer_id)&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Your volunteer ID will be assigned by the event organizers"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),r.jsx("div",{className:"mt-1 flex items-center",children:r.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${vt()}`,children:[Ct(),r.jsx("span",{className:"ml-1 capitalize",children:(Ue=e==null?void 0:e.role)==null?void 0:Ue.replace("_"," ")})]})})]})]}),r.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 space-y-3",children:[r.jsx("button",{onClick:()=>w(!0),className:"w-full bg-orange-500 text-white py-2 px-4 rounded-lg hover:bg-orange-600 transition-colors",children:"Change Password"}),d&&r.jsx("button",{onClick:()=>{const x=document.createElement("a");x.download=`qr-code-${e==null?void 0:e.first_name}-${e==null?void 0:e.last_name}.png`,x.href=d,x.click()},className:"w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors",children:"Download QR Code"})]})]})})}),v&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Change Password"}),r.jsx("button",{onClick:()=>{w(!1),D({oldPassword:"",newPassword:"",confirmPassword:""}),z(null),J(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(ee,{className:"h-6 w-6"})})]}),r.jsxs("form",{onSubmit:jt,className:"space-y-4",children:[Te&&r.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center",children:[r.jsx(St,{className:"h-5 w-5 text-red-600 mr-2"}),r.jsx("p",{className:"text-red-700 text-sm",children:Te})]}),Ie&&r.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg flex items-center",children:[r.jsx(Pt,{className:"h-5 w-5 text-green-600 mr-2"}),r.jsx("p",{className:"text-green-700 text-sm",children:Ie})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:P.new?"text":"password",value:A.newPassword,onChange:x=>D(M=>({...M,newPassword:x.target.value})),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",required:!0,minLength:6}),r.jsx("button",{type:"button",onClick:()=>Be(x=>({...x,new:!x.new})),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:P.new?r.jsx(ze,{className:"h-4 w-4"}):r.jsx(He,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:P.confirm?"text":"password",value:A.confirmPassword,onChange:x=>D(M=>({...M,confirmPassword:x.target.value})),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",required:!0,minLength:6}),r.jsx("button",{type:"button",onClick:()=>Be(x=>({...x,confirm:!x.confirm})),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:P.confirm?r.jsx(ze,{className:"h-4 w-4"}):r.jsx(He,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>{w(!1),D({oldPassword:"",newPassword:"",confirmPassword:""}),z(null),J(null)},className:"flex-1 bg-gray-200 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:_e,className:"flex-1 bg-orange-500 text-white py-2 px-4 rounded-lg hover:bg-orange-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:_e?"Updating...":"Save Changes"})]})]})]})})}),m&&g&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Notification"}),r.jsx("button",{onClick:()=>{y(!1),b(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(ee,{className:"h-6 w-6"})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{children:r.jsx("h3",{className:"font-semibold text-gray-900",children:g.title})}),r.jsx("div",{children:r.jsx("p",{className:"text-gray-700",children:g.message})}),r.jsxs("div",{className:"text-sm text-gray-500",children:[r.jsxs("p",{children:["From: ",g.sender]}),r.jsxs("p",{children:["Date: ",new Date(g.created_at).toLocaleString()]})]})]}),!g.is_read&&r.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:r.jsx("button",{onClick:()=>Nt(g.id),className:"w-full bg-orange-500 text-white py-2 px-4 rounded-lg hover:bg-orange-600 transition-colors",children:"Mark as Read"})})]})})}),p&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[r.jsx(Q,{className:"h-6 w-6 mr-3 text-orange-600"}),"Leaderboard"]}),r.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(ee,{className:"h-6 w-6"})})]}),r.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:r.jsx(Cn,{userRole:e==null?void 0:e.role,currentUserId:e==null?void 0:e.id})})]})})})]})};export{Qe as B,_t as C,kn as D,Tt as Q,It as S,Q as T,We as U,ee as X,Ge as a,X as b};

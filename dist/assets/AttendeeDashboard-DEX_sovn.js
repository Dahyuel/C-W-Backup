import{u as Qe,a as Fe,r,s as c,g as Pe,b as Oe,j as e,U as k,C as B,c as R}from"./index-CTR9K_C5.js";import{D as ae,T as $e,S as re,Q as ne,B as le,X as U,b as qe}from"./DashboardLayout-ChN58qoY.js";import{A as $}from"./activity-VgJ5GWXv.js";import{C as q}from"./calendar-CLr0XUdv.js";import{C as S}from"./clock-DmGtBZEs.js";import{M}from"./map-pin-VuyWNYdp.js";import{X as ie}from"./x-circle-BEsrRhs5.js";import"./heart-CbsRToVe.js";const Je=()=>{const{profile:t}=Qe();Fe();const[h,oe]=r.useState(null),[Y,ce]=r.useState([]),[W,de]=r.useState([]),[Q,me]=r.useState([]),[xe,he]=r.useState([]),[z,ge]=r.useState([]),[m,ue]=r.useState("overview"),[b,I]=r.useState(1),[X,be]=r.useState(!0),[F,G]=r.useState(!1),[fe,P]=r.useState(!1),[V,C]=r.useState(""),[je,H]=r.useState(!1),[l,N]=r.useState(null),[pe,y]=r.useState(!1),[_,v]=r.useState(!1),[J,d]=r.useState(null),[K,f]=r.useState(null),[x,D]=r.useState(null),[Ne,E]=r.useState(!1),[g,O]=r.useState(null),[ye,A]=r.useState(!1),[ve,Z]=r.useState(!1);r.useEffect(()=>{we();const s=c.channel("sessions_changes").on("postgres_changes",{event:"*",schema:"public",table:"sessions"},i=>{console.log("Session change detected:",i),j()}).subscribe(),a=c.channel("attendances_changes").on("postgres_changes",{event:"*",schema:"public",table:"attendances",filter:"scan_type=eq.booking"},i=>{console.log("Booking change detected:",i),j(),t!=null&&t.id&&w()}).subscribe(),n=c.channel("user_scores_changes").on("postgres_changes",{event:"*",schema:"public",table:"user_scores",filter:`user_id=eq.${t==null?void 0:t.id}`},i=>{console.log("User score change detected:",i),ee(),se()}).subscribe();return()=>{c.removeChannel(s),c.removeChannel(a),c.removeChannel(n)}},[t==null?void 0:t.id]),r.useEffect(()=>{if(m==="sessions"){const s=setInterval(()=>{j(),t!=null&&t.id&&w()},3e4);return()=>clearInterval(s)}},[m,t==null?void 0:t.id]),r.useEffect(()=>{m==="events"&&te(b)},[m,b]);const we=async()=>{if(t!=null&&t.id)try{await ee(),await se(),await te(1),await j(),await w(),await Se()}catch(s){console.error(s)}finally{be(!1)}},ee=async()=>{if(t!=null&&t.id)try{const{data:s,error:a}=await Pe(t.id);a?console.error("Error fetching user score:",a):s&&oe(s)}catch(s){console.error("Error fetching user score:",s)}},se=async()=>{if(t!=null&&t.id)try{const{data:s,error:a}=await Oe(t.id,5);a?console.error("Error fetching recent activities:",a):ce(s)}catch(s){console.error("Error fetching recent activities:",s)}},te=async s=>{Z(!0);try{const{data:a,error:n}=await c.from("schedule_items").select("*").order("start_time",{ascending:!0});if(n)console.error("Error fetching events:",n);else if(a){const i=a.filter(o=>ke(o.start_time)===s);de(i)}}catch(a){console.error("Error fetching events:",a)}finally{Z(!1)}},ke=s=>{const a=new Date(s),n=new Date("2024-03-18"),i=a.getTime()-n.getTime(),o=Math.ceil(i/(1e3*60*60*24));return Math.max(1,Math.min(5,o+1))},j=async()=>{G(!0);try{const{data:s,error:a}=await c.from("sessions").select("*").order("start_time",{ascending:!0});a?console.error("Error fetching sessions:",a):s&&me(s)}catch(s){console.error("Error fetching sessions:",s)}finally{G(!1)}},w=async()=>{if(t!=null&&t.id)try{const{data:s,error:a}=await c.from("attendances").select("session_id, scanned_at").eq("user_id",t.id).eq("scan_type","booking");if(a){console.error("Error fetching user bookings:",a);return}if(s){const n=[];for(const i of s){const{data:o,error:u}=await c.from("sessions").select("*").eq("id",i.session_id).single();!u&&o&&n.push({...i,session:o})}ge(n)}}catch(s){console.error("Error fetching user bookings:",s)}},Se=async()=>{try{const{data:s,error:a}=await c.from("companies").select("*").order("name",{ascending:!0});a?console.error("Error fetching companies:",a):s&&he(s)}catch(s){console.error("Error fetching companies:",s)}},Ce=async()=>{if(t!=null&&t.id){H(!0);try{const s=await qe.toDataURL(t.id,{width:200,margin:2,color:{dark:"#000000",light:"#FFFFFF"},errorCorrectionLevel:"M"});C(s)}catch(s){console.error("Error generating QR code:",s),C("")}finally{H(!1)}}},_e=()=>{P(!0),Ce()},De=s=>{N(s),y(!0),d(null),f(null)},Ee=s=>{D(s),E(!0)},Ae=s=>{O(s),A(!0)},L=s=>z.some(a=>a.session_id===s),T=s=>s.max_attendees&&s.current_bookings>=s.max_attendees,p=s=>{const a=new Date(s.start_time),n=new Date(s.end_time);for(const i of z)if(i.session){const o=new Date(i.session.start_time),u=new Date(i.session.end_time);if(a>=o&&a<u||n>o&&n<=u||a<=o&&n>=u)return{hasOverlap:!0,conflictingSession:i.session}}return{hasOverlap:!1}},Le=async s=>{if(t!=null&&t.id){v(!0),d(null),f(null);try{const a=Q.find(o=>o.id===s);if(a){const{hasOverlap:o,conflictingSession:u}=p(a);if(o&&u){d(`You already have a booking for "${u.title}" at the same time. Please cancel that booking first.`),v(!1);return}}const{data:n,error:i}=await c.rpc("book_session",{p_user_id:t.id,p_session_id:s,p_scanned_by:t.id});i?d(i.message||"Failed to book session"):n!=null&&n.success?(f("Session booked successfully!"),await j(),await w(),setTimeout(()=>{y(!1),N(null)},2e3)):d((n==null?void 0:n.message)||"Failed to book session")}catch{d("An error occurred while booking the session")}finally{v(!1)}}},Te=async s=>{if(t!=null&&t.id){v(!0),d(null),f(null);try{const{data:a,error:n}=await c.rpc("cancel_booking",{p_user_id:t.id,p_session_id:s});n?d(n.message||"Failed to cancel booking"):a!=null&&a.success?(f("Booking cancelled successfully!"),await j(),await w(),setTimeout(()=>{y(!1),N(null)},2e3)):d((a==null?void 0:a.message)||"Failed to cancel booking")}catch{d("An error occurred while cancelling the booking")}finally{v(!1)}}},Be=s=>{switch(s){case"attendance":return e.jsx(B,{className:"h-4 w-4 text-green-500"});case"session":return e.jsx(k,{className:"h-4 w-4 text-blue-500"});case"event":return e.jsx(q,{className:"h-4 w-4 text-purple-500"});case"bonus":return e.jsx(re,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx($,{className:"h-4 w-4 text-gray-500"})}};if(X)return e.jsx(ae,{title:"Dashboard",subtitle:"Welcome back to Career Week",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})})});const Re=["/src/Assets/day1.png","/src/Assets/day2.png","/src/Assets/day3.png","/src/Assets/day4.png","/src/Assets/day5.png"],Ue=s=>{window.open(s,"_blank")},Me=[{key:"overview",label:"Overview"},{key:"events",label:"Events"},{key:"sessions",label:"Sessions"},{key:"maps",label:"Maps"},{key:"employers",label:"Employers"}];return e.jsx(ae,{title:"Attendee Dashboard",subtitle:`Welcome back, ${t==null?void 0:t.first_name}!`,children:e.jsxs("div",{className:"fade-in-up-blur",children:[e.jsx("div",{className:"flex space-x-1 sm:space-x-4 border-b mb-6 overflow-x-auto scrollbar-hide fade-in-left",children:Me.map(s=>e.jsx("button",{onClick:()=>ue(s.key),className:`py-2 px-2 sm:px-4 font-semibold text-sm sm:text-base whitespace-nowrap transition-all duration-300 ${m===s.key?"border-b-2 border-orange-500 text-orange-600":"text-gray-500 hover:text-orange-600"}`,children:s.label},s.key))}),m==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 grid-stagger-blur",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-orange-100 p-6 card-hover-enhanced dashboard-card",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Your Score"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:(h==null?void 0:h.score)||0}),e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mt-2",children:e.jsx($e,{className:"h-6 w-6 text-orange-600"})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-orange-100 p-6 card-hover-enhanced dashboard-card",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Your Rank"}),e.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:["#",(h==null?void 0:h.rank)||0]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["of ",(h==null?void 0:h.total_users)||0," attendees"]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mt-2",children:e.jsx(re,{className:"h-6 w-6 text-blue-600"})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-orange-100 p-6 card-hover-enhanced dashboard-card",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Your QR Code"}),e.jsx("button",{onClick:_e,className:"mt-2 bg-orange-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-orange-600 transition-colors",children:"Show QR"}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mt-2",children:e.jsx(ne,{className:"h-6 w-6 text-green-600"})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-orange-100 p-6 card-hover-enhanced dashboard-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Recent Activities"}),e.jsx($,{className:"h-5 w-5 text-gray-400"})]}),Y.length>0?e.jsx("div",{className:"space-y-3 max-h-40 overflow-y-auto",children:Y.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[Be(s.activity_type),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-gray-900 truncate",children:s.activity_description}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(s.awarded_at).toLocaleDateString()})]})]}),e.jsxs("span",{className:"text-xs font-semibold text-green-600 ml-2",children:["+",s.points]})]},s.id))}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx($,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-gray-500",children:"No recent activities"})]})]})]}),m==="events"&&e.jsxs("div",{className:"tab-content-animate",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center mb-4 sm:mb-0",children:[e.jsx(q,{className:"h-5 w-5 mr-2 text-orange-600"})," 5-Day Stage Activities"]}),e.jsx("div",{className:"flex space-x-2",children:[1,2,3,4,5].map(s=>e.jsxs("button",{onClick:()=>I(s),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${b===s?"bg-orange-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Day ",s]},s))})]}),ve?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"})}):W.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 grid-stagger-blur",children:W.map(s=>e.jsxs("div",{onClick:()=>Ae(s),className:"bg-white rounded-xl shadow-sm border border-orange-100 p-6 cursor-pointer h-full flex flex-col card-hover-enhanced dashboard-card",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2 flex-1",children:s.title})}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-3 flex-1",children:s.description}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-500 mt-auto",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{className:"h-3 w-3 mr-2 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[new Date(s.start_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," -",new Date(s.end_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"h-3 w-3 mr-2 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.location})]})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100",children:s.item_type?e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:s.item_type}):e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Event"})})]},s.id))}):e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[e.jsx(q,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsxs("p",{className:"text-gray-500",children:["No events scheduled for Day ",b]})]})]}),m==="sessions"&&e.jsxs("div",{className:"tab-content-animate",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(k,{className:"h-5 w-5 mr-2 text-orange-600"})," Available Sessions"]}),F&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-orange-500 mr-2"}),"Updating..."]})]}),Q.length===0&&!X?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(k,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No sessions available"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 grid-stagger-blur",children:Q.map(s=>{const a=L(s.id),n=T(s),{hasOverlap:i}=p(s);return e.jsxs("div",{onClick:()=>De(s),className:"bg-white rounded-xl shadow-sm border border-orange-100 p-6 cursor-pointer relative card-hover-enhanced dashboard-card",children:[F&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"})}),e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2",children:s.title}),a&&e.jsx(B,{className:"h-5 w-5 text-green-500 flex-shrink-0 ml-2"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:s.description}),s.speaker&&e.jsxs("p",{className:"text-sm font-medium text-gray-900 mb-2",children:["Speaker: ",s.speaker]}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{className:"h-3 w-3 mr-1"}),new Date(s.start_time).toLocaleDateString()," ",new Date(s.start_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"h-3 w-3 mr-1"}),s.location]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{className:"h-3 w-3 mr-1"}),e.jsxs("span",{className:`transition-colors ${F?"text-orange-500":""}`,children:[s.current_bookings||0,"/",s.max_attendees||"Unlimited"," booked"]})]})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100",children:a?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(B,{className:"h-3 w-3 mr-1"}),"Booked"]}):i?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(S,{className:"h-3 w-3 mr-1"}),"Time Conflict"]}):n?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(ie,{className:"h-3 w-3 mr-1"}),"Full"]}):e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Available"})})]},s.id)})})]}),m==="maps"&&e.jsxs("div",{className:"tab-content-animate",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Event Maps"}),e.jsx("div",{className:"flex space-x-2 mb-4",children:[1,2,3,4,5].map(s=>e.jsxs("button",{onClick:()=>I(s),className:`px-4 py-2 rounded-lg text-sm ${b===s?"bg-orange-500 text-white":"bg-gray-100 text-gray-700"}`,children:["Day ",s]},s))}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-4 flex justify-center",children:e.jsx("img",{src:Re[b-1],alt:`Day ${b} Map`,className:"max-w-full h-auto rounded-lg"})})]}),m==="employers"&&e.jsxs("div",{className:"tab-content-animate",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx(le,{className:"h-5 w-5 mr-2 text-orange-600"})," Participating Companies"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 grid-stagger-blur",children:xe.map(s=>e.jsx("div",{onClick:()=>Ee(s),className:"bg-white rounded-xl shadow-sm border border-orange-100 p-6 cursor-pointer card-hover-enhanced dashboard-card",children:e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:s.logo_url,alt:`${s.name} logo`,className:"h-16 w-auto mx-auto mb-4 object-contain"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-3",children:s.description}),s.booth_number&&e.jsxs("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800 mb-2",children:["Booth ",s.booth_number]}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(le,{className:"h-5 w-5 text-orange-500"})})]})},s.id))})]}),fe&&R.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[200] p-4 modal-backdrop-blur",onClick:()=>{P(!1),C("")},children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-sm w-full text-center modal-content-blur fade-in-up-blur",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 fade-in-blur",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Your QR Code"}),e.jsx("button",{onClick:()=>{P(!1),C("")},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(U,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"w-48 h-48 bg-gray-100 rounded-lg mx-auto mb-4 flex items-center justify-center fade-in-blur",children:je?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Generating..."})]}):V?e.jsx("img",{src:V,alt:"QR Code",className:"w-full h-full object-contain rounded-lg"}):e.jsxs("div",{className:"text-center",children:[e.jsx(ne,{className:"h-16 w-16 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-gray-500",children:"QR Code"})]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 fade-in-blur",children:"Show this QR code for check-ins"}),(t==null?void 0:t.id)&&e.jsx("p",{className:"text-xs text-gray-400 mt-1 font-mono break-all fade-in-blur",children:t.id})]})}),document.body),ye&&g&&R.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[200] p-4 modal-backdrop-blur",onClick:()=>{A(!1),O(null)},children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto modal-content-blur fade-in-up-blur",onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"p-6 stagger-children",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 fade-in-blur",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Event Details"}),e.jsx("button",{onClick:()=>{A(!1),O(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(U,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"fade-in-blur",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:g.title}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:g.description})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 fade-in-blur",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date & Time"}),e.jsx("p",{className:"text-gray-900",children:new Date(g.start_time).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[new Date(g.start_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," -",new Date(g.end_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{className:"fade-in-blur",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),e.jsxs("p",{className:"text-gray-900 flex items-center",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),g.location]})]}),g.item_type&&e.jsxs("div",{className:"fade-in-blur",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Type"}),e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:g.item_type})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200 fade-in-blur",children:e.jsx("button",{onClick:()=>A(!1),className:"w-full bg-orange-500 text-white py-3 px-4 rounded-lg hover:bg-orange-600 transition-colors font-medium",children:"Close Details"})})]})]})})}),document.body),pe&&l&&R.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[200] p-4 modal-backdrop-blur",onClick:()=>{y(!1),N(null),d(null),f(null)},children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto modal-content-blur fade-in-up-blur",onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"p-6 stagger-children",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 fade-in-blur",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Session Details"}),e.jsx("button",{onClick:()=>{y(!1),N(null),d(null),f(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(U,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"fade-in-blur",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:l.title}),e.jsx("p",{className:"text-gray-600 mt-2",children:l.description})]}),l.speaker&&e.jsxs("div",{className:"fade-in-blur",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Speaker"}),e.jsx("p",{className:"text-gray-900",children:l.speaker})]}),e.jsxs("div",{className:"fade-in-blur",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date & Time"}),e.jsxs("p",{className:"text-gray-900",children:[new Date(l.start_time).toLocaleDateString()," at"," ",new Date(l.start_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{className:"fade-in-blur",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Location"}),e.jsx("p",{className:"text-gray-900",children:l.location})]}),e.jsxs("div",{className:"fade-in-blur",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Capacity"}),e.jsxs("p",{className:"text-gray-900",children:[l.current_bookings||0," / ",l.max_attendees||"Unlimited"," booked"]})]}),!L(l.id)&&p(l).hasOverlap&&e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg fade-in-blur",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(S,{className:"h-5 w-5 text-yellow-500 mr-2 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-800 font-medium text-sm",children:"Time Conflict"}),e.jsx("p",{className:"text-yellow-700 text-xs mt-1",children:"You already have a booking at this time. Please cancel your existing booking first."})]})]})}),e.jsx("div",{className:"pt-4 border-t border-gray-200 fade-in-blur",children:L(l.id)?e.jsxs("div",{className:"flex items-center p-3 bg-green-50 rounded-lg",children:[e.jsx(B,{className:"h-5 w-5 text-green-500 mr-2"}),e.jsx("span",{className:"text-green-800 font-medium",children:"You have booked this session"})]}):T(l)?e.jsxs("div",{className:"flex items-center p-3 bg-red-50 rounded-lg",children:[e.jsx(ie,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsx("span",{className:"text-red-800 font-medium",children:"This session is fully booked"})]}):p(l).hasOverlap?e.jsxs("div",{className:"flex items-center p-3 bg-yellow-50 rounded-lg",children:[e.jsx(S,{className:"h-5 w-5 text-yellow-500 mr-2"}),e.jsx("span",{className:"text-yellow-800 font-medium",children:"You have a conflicting booking"})]}):e.jsxs("div",{className:"flex items-center p-3 bg-blue-50 rounded-lg",children:[e.jsx(k,{className:"h-5 w-5 text-blue-500 mr-2"}),e.jsx("span",{className:"text-blue-800 font-medium",children:"Available for booking"})]})}),J&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg fade-in-blur",children:e.jsx("p",{className:"text-red-700 text-sm",children:J})}),K&&e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg fade-in-blur",children:e.jsx("p",{className:"text-green-700 text-sm",children:K})}),e.jsx("div",{className:"pt-4 space-y-3 fade-in-blur",children:L(l.id)?e.jsx("button",{onClick:()=>Te(l.id),disabled:_,className:"w-full bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:_?"Cancelling...":"Cancel Booking"}):e.jsx("button",{onClick:()=>Le(l.id),disabled:_||T(l)||p(l).hasOverlap,className:"w-full bg-orange-500 text-white py-2 px-4 rounded-lg hover:bg-orange-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:_?"Booking...":T(l)?"Session Full":p(l).hasOverlap?"Time Conflict":"Book Now"})})]})]})})}),document.body),Ne&&x&&R.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[200] p-4 modal-backdrop-blur",onClick:()=>{E(!1),D(null)},children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto modal-content-blur fade-in-up-blur",onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"p-6 stagger-children",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 fade-in-blur",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Company Details"}),e.jsx("button",{onClick:()=>{E(!1),D(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(U,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center fade-in-blur",children:[e.jsx("img",{src:x.logo_url,alt:`${x.name} logo`,className:"h-24 w-auto mx-auto mb-4 object-contain"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:x.name}),x.booth_number&&e.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-orange-100 text-orange-800 mt-2",children:[e.jsx(M,{className:"h-4 w-4 mr-1"}),"Booth ",x.booth_number]})]}),e.jsxs("div",{className:"fade-in-blur",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"About Company"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:x.description})]}),e.jsxs("div",{className:"fade-in-blur",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),e.jsx("a",{href:x.website,target:"_blank",rel:"noopener noreferrer",className:"text-orange-600 hover:text-orange-700 break-all",children:x.website})]}),e.jsxs("div",{className:"pt-4 space-y-3 fade-in-blur",children:[e.jsx("button",{onClick:()=>Ue(x.website),className:"w-full bg-orange-500 text-white py-3 px-4 rounded-lg hover:bg-orange-600 transition-colors font-medium",children:"Visit Career Page"}),e.jsx("button",{onClick:()=>{E(!1),D(null)},className:"w-full bg-gray-100 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Close"})]})]})]})})}),document.body)]})})};export{Je as default};

import{a as U,u as Y,r as c,j as e,C as S,A as B,c as H,d as M,L as O,v as C,e as q,f as z,h as G,i as J,k as W,F as K}from"./index-_PLFOake.js";import{H as b}from"./heart-DH_IhmDA.js";const re=()=>{const x=U(),{signUpVolunteer:P,signIn:Q,isAuthenticated:p,profile:N,loading:f,getRoleBasedRedirect:j}=Y(),[n,h]=c.useState(1),[s,E]=c.useState({firstName:"",lastName:"",email:"",phone:"",personalId:"",faculty:"",password:"",confirmPassword:"",role:""}),[k,d]=c.useState([]),[v,y]=c.useState(!1),[A,V]=c.useState(!1),g=[{id:1,title:"Personal Information",icon:M},{id:2,title:"Role Selection",icon:b},{id:3,title:"Account Security",icon:O}],$=[{value:"registration",label:"Registration Desk"},{value:"building",label:"Building Assistance"},{value:"info_desk",label:"Info Desk"},{value:"volunteer",label:"Other Volunteer"},{value:"team_leader",label:"Team Leader"}];c.useEffect(()=>{p&&N&&!f&&(console.log("âœ… Auth context ready, redirecting to dashboard..."),x(j(),{replace:!0}))},[p,N,f,x,j]);const i=(r,t)=>{E(l=>({...l,[r]:t})),d(l=>l.filter(o=>o.field!==r))},w=r=>{const t=[];if(r===1){const l=C(s.firstName,"First name");l&&t.push({field:"firstName",message:l});const o=C(s.lastName,"Last name");o&&t.push({field:"lastName",message:o});const m=q(s.email);m&&t.push({field:"email",message:m});const u=z(s.phone);u&&t.push({field:"phone",message:u});const I=G(s.personalId);I&&t.push({field:"personalId",message:I}),s.faculty||t.push({field:"faculty",message:"Faculty is required"})}if(r===2&&(s.role||t.push({field:"role",message:"Please select a volunteer role"})),r===3){const l=J(s.password);l&&t.push({field:"password",message:l});const o=W(s.password,s.confirmPassword);o&&t.push({field:"confirmPassword",message:o})}return t},R=()=>{const r=w(n);if(r.length>0){d(r);return}d([]),n<3&&h(n+1)},L=()=>{n>1&&h(n-1)},D=async r=>{r.preventDefault();const t=[1,2,3].flatMap(l=>w(l));if(t.length>0){d(t);const l=Math.min(...t.map(o=>["firstName","lastName","email","phone","personalId","faculty"].includes(o.field)?1:["role"].includes(o.field)?2:["password","confirmPassword"].includes(o.field)?3:1));h(l);return}y(!0),d([]);try{const l={first_name:s.firstName.trim(),last_name:s.lastName.trim(),phone:s.phone.trim(),personal_id:s.personalId.trim(),faculty:s.faculty,role:s.role},{data:o,error:m}=await P(s.email,s.password,l);if(m){d([{field:"general",message:m.message}]);return}const u=o==null?void 0:o.volunteerId;V(!0),u&&localStorage.setItem("newVolunteerId",u)}catch(l){console.error("Registration error:",l),d([{field:"general",message:l.message||"An unexpected error occurred"}])}finally{y(!1)}},a=r=>{var t;return(t=k.find(l=>l.field===r))==null?void 0:t.message},F=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),e.jsx("input",{type:"text",value:s.firstName,onChange:r=>i("firstName",r.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors ${a("firstName")?"border-red-500":"border-gray-300"}`,placeholder:"Enter your first name"}),a("firstName")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a("firstName")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",value:s.lastName,onChange:r=>i("lastName",r.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors ${a("lastName")?"border-red-500":"border-gray-300"}`,placeholder:"Enter your last name"}),a("lastName")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a("lastName")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",value:s.email,onChange:r=>i("email",r.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors ${a("email")?"border-red-500":"border-gray-300"}`,placeholder:"Enter your email address"}),a("email")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a("email")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),e.jsx("input",{type:"tel",value:s.phone,onChange:r=>i("phone",r.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors ${a("phone")?"border-red-500":"border-gray-300"}`,placeholder:"01X-XXXXXXXX"}),a("phone")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a("phone")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Personal ID *"}),e.jsx("input",{type:"text",value:s.personalId,onChange:r=>i("personalId",r.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors ${a("personalId")?"border-red-500":"border-gray-300"}`,placeholder:"14-digit Egyptian ID",maxLength:14}),a("personalId")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a("personalId")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Faculty *"}),e.jsxs("select",{value:s.faculty,onChange:r=>i("faculty",r.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors ${a("faculty")?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select faculty"}),K.map(r=>e.jsx("option",{value:r,children:r},r))]}),a("faculty")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a("faculty")})]})]}),X=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(b,{className:"h-6 w-6 text-orange-600 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-orange-900",children:"Volunteer Role Selection"})]}),e.jsx("p",{className:"text-orange-800",children:"Please select the volunteer role you're interested in. This helps us assign you to the most suitable position."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Preferred Volunteer Role *"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:$.map(r=>e.jsxs("label",{className:`relative flex cursor-pointer rounded-lg border p-4 focus:outline-none transition-colors ${s.role===r.value?"border-orange-500 bg-orange-50":"border-gray-300 bg-white hover:bg-gray-50"}`,children:[e.jsx("input",{type:"radio",name:"role",value:r.value,checked:s.role===r.value,onChange:t=>i("role",t.target.value),className:"sr-only"}),e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"font-medium text-gray-900",children:r.label})}),e.jsx("div",{className:`flex-shrink-0 ${s.role===r.value?"text-orange-600":"text-gray-300"}`,children:e.jsx(S,{className:"h-6 w-6"})})]})]},r.value))}),a("role")&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a("role")})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," Specific role assignments will be communicated after registration."]})})]}),_=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),e.jsx("input",{type:"password",value:s.password,onChange:r=>i("password",r.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors ${a("password")?"border-red-500":"border-gray-300"}`,placeholder:"Enter your password (minimum 6 characters)"}),a("password")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a("password")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password *"}),e.jsx("input",{type:"password",value:s.confirmPassword,onChange:r=>i("confirmPassword",r.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors ${a("confirmPassword")?"border-red-500":"border-gray-300"}`,placeholder:"Confirm your password"}),a("confirmPassword")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a("confirmPassword")})]})]}),T=()=>{switch(n){case 1:return F();case 2:return X();case 3:return _();default:return null}};if(f)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(A){const r=localStorage.getItem("newVolunteerId");return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-white flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-center border border-orange-100",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(S,{className:"w-8 h-8 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Volunteer Registration Successful!"}),r&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Your Volunteer ID:"}),e.jsx("p",{className:"text-lg font-bold text-blue-900",children:r}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Please save this ID for future reference"})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your account has been created successfully. You can now log in to access your volunteer dashboard."}),e.jsx("button",{onClick:()=>{localStorage.removeItem("newVolunteerId"),x("/login")},className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white py-3 px-4 rounded-lg font-medium hover:from-orange-600 hover:to-orange-700 transition-all duration-200 transform hover:scale-105",children:"Go to Login"})]})})}return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-white py-8 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx(b,{className:"h-12 w-12 text-orange-600 mr-3"}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"Volunteer Registration"})]}),e.jsx("p",{className:"text-gray-600",children:"Join our amazing volunteer team and help make Career Week unforgettable!"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-between max-w-2xl mx-auto",children:g.map((r,t)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 transition-colors ${n>=r.id?"bg-orange-500 border-orange-500 text-white":"bg-white border-gray-300 text-gray-400"}`,children:e.jsx(r.icon,{className:"w-5 h-5"})}),t<g.length-1&&e.jsx("div",{className:`w-16 h-0.5 mx-2 transition-colors ${n>r.id?"bg-orange-500":"bg-gray-300"}`})]},r.id))}),e.jsx("div",{className:"flex justify-between max-w-2xl mx-auto mt-2",children:g.map(r=>e.jsx("div",{className:"text-xs text-center",style:{width:"120px"},children:e.jsx("span",{className:n>=r.id?"text-orange-600 font-medium":"text-gray-500",children:r.title})},r.id))})]}),e.jsxs("form",{onSubmit:D,className:"bg-white rounded-2xl shadow-2xl p-8 border border-orange-100",children:[a("general")&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center",children:[e.jsx(B,{className:"w-5 h-5 text-red-600 mr-3"}),e.jsx("p",{className:"text-red-700",children:a("general")})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:g[n-1].title}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 h-2 rounded-full transition-all duration-300",style:{width:`${n/3*100}%`}})})]}),T(),e.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:L,disabled:n===1,className:`px-6 py-3 rounded-lg font-medium transition-all duration-200 ${n===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Previous"}),n<3?e.jsxs("button",{type:"button",onClick:R,className:"px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg font-medium hover:from-orange-600 hover:to-orange-700 transition-all duration-200 transform hover:scale-105 flex items-center",children:["Next",e.jsx(H,{className:"w-4 h-4 ml-2"})]}):e.jsx("button",{type:"submit",disabled:v,className:"px-8 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg font-medium hover:from-orange-600 hover:to-orange-700 transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Volunteer Account..."]}):"Create Volunteer Account"})]}),e.jsx("div",{className:"text-center mt-6 pt-6 border-t border-gray-200",children:e.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",onClick:()=>x("/login"),className:"text-orange-600 hover:text-orange-700 font-medium transition-colors",children:"Sign in here"})]})})]})]})})};export{re as VolunteerRegistration};

import{u as p,r as d,g as N,b as v,j as e}from"./index-B2JZlGnH.js";import{D as h,T as y}from"./DashboardLayout-CU78zUDl.js";import{H as w}from"./heart-BPnXk0J8.js";import{A as u}from"./activity-Cw-uUv_o.js";import{C as D}from"./clock-CkUmMJAq.js";const S=()=>{var x;const{profile:s}=p(),[r,o]=d.useState(null),[i,c]=d.useState([]),[g,l]=d.useState(!0);d.useEffect(()=>{f()},[s==null?void 0:s.id]);const f=async()=>{if(s!=null&&s.id)try{l(!0);const{data:t,error:a}=await N(s.id);a?(console.error("Error fetching volunteer stats:",a),o({score:s.score||0,rank:0,total_users:0})):t&&o(t);const{data:m,error:n}=await v(s.id,5);n?(console.error("Error fetching recent activities:",n),c([])):c(m||[])}catch(t){console.error("Error fetching dashboard data:",t),o({score:s.score||0,rank:0,total_users:0}),c([])}finally{l(!1)}},j=t=>t.split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "),b=t=>{const a=new Date(t),n=Math.floor((new Date().getTime()-a.getTime())/(1e3*60*60));return n<1?"Just now":n<24?`${n}h ago`:`${Math.floor(n/24)}d ago`};return g?e.jsx(h,{title:"Volunteer Dashboard",subtitle:"Welcome to your volunteer portal",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})})}):e.jsx(h,{title:"Volunteer Dashboard",subtitle:`Welcome back, ${s==null?void 0:s.first_name}!`,children:e.jsxs("div",{className:"fade-in-up-blur",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto grid-stagger-blur",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-orange-100 p-6 card-hover-enhanced dashboard-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Points Earned"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:(r==null?void 0:r.score)||0})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(w,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-orange-100 p-6 card-hover-enhanced dashboard-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Your Rank"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:r!=null&&r.rank?`#${r.rank}`:"N/A"}),(r==null?void 0:r.total_users)&&e.jsxs("p",{className:"text-xs text-gray-500",children:["of ",r.total_users]})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(y,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-orange-100 p-6 card-hover-enhanced dashboard-card",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Recent Activity"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:i.length>0?`+${((x=i[0])==null?void 0:x.points)||0}`:"0"}),i.length>0&&e.jsx("p",{className:"text-xs text-gray-500",children:"Latest points"})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(u,{className:"h-6 w-6 text-purple-600"})})]})})]}),e.jsx("div",{className:"max-w-4xl mx-auto mt-8",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-orange-100 p-6 fade-in-blur card-hover dashboard-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(D,{className:"h-5 w-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activities"})]}),i.length>0?e.jsx("div",{className:"space-y-3 stagger-children",children:i.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg smooth-hover",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:j(t.activity_type)}),t.activity_description&&e.jsx("p",{className:"text-sm text-gray-600",children:t.activity_description}),e.jsx("p",{className:"text-xs text-gray-500",children:b(t.awarded_at)})]}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${t.points>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[t.points>0?"+":"",t.points," pts"]})})]},t.id))}):e.jsxs("div",{className:"text-center py-8 fade-in-scale",children:[e.jsx(u,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No recent activities"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Start participating to earn points and see your activities here!"})]})]})}),e.jsx("div",{className:"max-w-4xl mx-auto mt-8 text-center",children:e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-orange-100 rounded-xl p-6 border border-orange-200 fade-in-blur card-hover",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Volunteer Information"}),e.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["Thank you for your dedication and hard work! Your contributions make this event possible.",e.jsx("br",{}),"If anything comes up, refer to your team leader."]}),(s==null?void 0:s.volunteer_id)&&e.jsxs("div",{className:"mt-4 inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-orange-200 text-orange-800",children:["ID: ",s.volunteer_id]})]})})]})})};export{S as VolunteerDashboard};

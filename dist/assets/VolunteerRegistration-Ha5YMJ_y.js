import{a as G,u as q,r as c,j as e,C as I,R as O,A as Y,c as H,d as J,L as W,v as E,e as K,f as Q,h as Z,i as ee,k as re,F as ae,U as se}from"./index-Cj-T6Nn4.js";import{H as b}from"./heart-D5GG3oA0.js";const ne=()=>{const g=G(),{signUpVolunteer:P,signIn:te,isAuthenticated:p,profile:v,loading:h,getRoleBasedRedirect:j}=q(),[n,f]=c.useState(1),[a,N]=c.useState({firstName:"",lastName:"",email:"",phone:"",personalId:"",faculty:"",password:"",confirmPassword:"",role:"",gender:"",tl_team:""}),[T,d]=c.useState([]),[y,w]=c.useState(!1),[_,R]=c.useState(!1),x=[{id:1,title:"Personal Information",icon:J},{id:2,title:"Role Selection",icon:b},{id:3,title:"Account Security",icon:W}],$=[{value:"registration",label:"Registration Desk"},{value:"building",label:"Building Assistance"},{value:"info_desk",label:"Info Desk"},{value:"ushers",label:"Ushers"},{value:"marketing",label:"Marketing"},{value:"media",label:"Media"},{value:"ER",label:"ER Team"},{value:"BD",label:"Business Development"},{value:"catering",label:"Catering"},{value:"feedback",label:"Feedback Team"},{value:"stage",label:"Stage Team"},{value:"team_leader",label:"Team Leader"}],A=[{value:"registration",label:"Registration Team"},{value:"building",label:"Building Team"},{value:"info_desk",label:"Info Desk Team"},{value:"ushers",label:"Ushers Team"},{value:"marketing",label:"Marketing Team"},{value:"media",label:"Media Team"},{value:"ER",label:"ER Team"},{value:"BD",label:"Business Development Team"},{value:"catering",label:"Catering Team"},{value:"feedback",label:"Feedback Team"},{value:"stage",label:"Stage Team"}],D=[{value:"male",label:"Male"},{value:"female",label:"Female"}];c.useEffect(()=>{p&&v&&!h&&(console.log("âœ… Auth context ready, redirecting to dashboard..."),g(j(),{replace:!0}))},[p,v,h,g,j]);const i=(r,t)=>{N(l=>({...l,[r]:t})),d(l=>l.filter(o=>o.field!==r))};c.useEffect(()=>{a.role!=="team_leader"&&N(r=>({...r,tl_team:""}))},[a.role]);const L=r=>!r||!r.trim()?"Gender is required":["male","female"].includes(r.trim().toLowerCase())?null:"Please select a valid gender",k=r=>{const t=[];if(r===1){const l=E(a.firstName,"First name");l&&t.push({field:"firstName",message:l});const o=E(a.lastName,"Last name");o&&t.push({field:"lastName",message:o});const m=K(a.email);m&&t.push({field:"email",message:m});const u=Q(a.phone);u&&t.push({field:"phone",message:u});const S=Z(a.personalId);S&&t.push({field:"personalId",message:S}),a.faculty||t.push({field:"faculty",message:"Faculty is required"});const C=L(a.gender);C&&t.push({field:"gender",message:C})}if(r===2&&(a.role||t.push({field:"role",message:"Please select a volunteer role"}),a.role==="team_leader"&&!a.tl_team&&t.push({field:"tl_team",message:"Please select which team you will lead"})),r===3){const l=ee(a.password);l&&t.push({field:"password",message:l});const o=re(a.password,a.confirmPassword);o&&t.push({field:"confirmPassword",message:o})}return t},F=()=>{const r=k(n);if(r.length>0){d(r);return}d([]),n<3&&f(n+1)},V=()=>{n>1&&f(n-1)},X=async r=>{r.preventDefault();const t=[1,2,3].flatMap(l=>k(l));if(t.length>0){d(t);const l=Math.min(...t.map(o=>["firstName","lastName","email","phone","personalId","faculty","gender"].includes(o.field)?1:["role","tl_team"].includes(o.field)?2:["password","confirmPassword"].includes(o.field)?3:1));f(l);return}w(!0),d([]);try{const l={first_name:a.firstName.trim(),last_name:a.lastName.trim(),phone:a.phone.trim(),personal_id:a.personalId.trim(),faculty:a.faculty,role:a.role,gender:a.gender,tl_team:a.tl_team||null},{data:o,error:m}=await P(a.email,a.password,l);if(m){d([{field:"general",message:m.message}]);return}const u=o==null?void 0:o.volunteerId;R(!0),u&&localStorage.setItem("newVolunteerId",u)}catch(l){console.error("Registration error:",l),d([{field:"general",message:l.message||"An unexpected error occurred"}])}finally{w(!1)}},s=r=>{var t;return(t=T.find(l=>l.field===r))==null?void 0:t.message},B=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),e.jsx("input",{type:"text",value:a.firstName,onChange:r=>i("firstName",r.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors ${s("firstName")?"border-red-500":"border-gray-300"}`,placeholder:"Enter your first name"}),s("firstName")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s("firstName")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",value:a.lastName,onChange:r=>i("lastName",r.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors ${s("lastName")?"border-red-500":"border-gray-300"}`,placeholder:"Enter your last name"}),s("lastName")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s("lastName")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",value:a.email,onChange:r=>i("email",r.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors ${s("email")?"border-red-500":"border-gray-300"}`,placeholder:"Enter your email address"}),s("email")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s("email")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),e.jsx("input",{type:"tel",value:a.phone,onChange:r=>i("phone",r.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors ${s("phone")?"border-red-500":"border-gray-300"}`,placeholder:"01X-XXXXXXXX"}),s("phone")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s("phone")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Personal ID *"}),e.jsx("input",{type:"text",value:a.personalId,onChange:r=>i("personalId",r.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors ${s("personalId")?"border-red-500":"border-gray-300"}`,placeholder:"14-digit Egyptian ID",maxLength:14}),s("personalId")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s("personalId")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Faculty *"}),e.jsxs("select",{value:a.faculty,onChange:r=>i("faculty",r.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors ${s("faculty")?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select faculty"}),ae.map(r=>e.jsx("option",{value:r,children:r},r))]}),s("faculty")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s("faculty")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender *"}),e.jsxs("select",{value:a.gender,onChange:r=>i("gender",r.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors ${s("gender")?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select gender"}),D.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))]}),s("gender")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s("gender")})]})]})]}),M=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(b,{className:"h-6 w-6 text-orange-600 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-orange-900",children:"Volunteer Role Selection"})]}),e.jsx("p",{className:"text-orange-800",children:"Please select the volunteer role you're interested in. This helps us assign you to the most suitable position."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Preferred Volunteer Role *"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:$.map(r=>e.jsxs("label",{className:`relative flex cursor-pointer rounded-lg border p-4 focus:outline-none transition-colors ${a.role===r.value?"border-orange-500 bg-orange-50":"border-gray-300 bg-white hover:bg-gray-50"}`,children:[e.jsx("input",{type:"radio",name:"role",value:r.value,checked:a.role===r.value,onChange:t=>i("role",t.target.value),className:"sr-only"}),e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"font-medium text-gray-900",children:r.label})}),e.jsx("div",{className:`flex-shrink-0 ${a.role===r.value?"text-orange-600":"text-gray-300"}`,children:e.jsx(I,{className:"h-6 w-6"})})]})]},r.value))}),s("role")&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:s("role")})]}),a.role==="team_leader"&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(se,{className:"h-6 w-6 text-blue-600 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Team Leadership"})]}),e.jsx("p",{className:"text-blue-800 mb-4",children:"As a Team Leader, please select which team you will be leading. This helps us organize the volunteer structure."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Team to Lead *"}),e.jsxs("select",{value:a.tl_team,onChange:r=>i("tl_team",r.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${s("tl_team")?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select team"}),A.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))]}),s("tl_team")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s("tl_team")})]})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:"Note:"})," Specific role assignments and team placements will be confirmed by the event organizers after registration."]})})]}),U=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),e.jsx("input",{type:"password",value:a.password,onChange:r=>i("password",r.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors ${s("password")?"border-red-500":"border-gray-300"}`,placeholder:"Enter your password (minimum 6 characters)"}),s("password")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s("password")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password *"}),e.jsx("input",{type:"password",value:a.confirmPassword,onChange:r=>i("confirmPassword",r.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors ${s("confirmPassword")?"border-red-500":"border-gray-300"}`,placeholder:"Confirm your password"}),s("confirmPassword")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s("confirmPassword")})]})]}),z=()=>{switch(n){case 1:return B();case 2:return M();case 3:return U();default:return null}};if(h)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(_){const r=localStorage.getItem("newVolunteerId");return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-white flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-center border border-orange-100",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(I,{className:"w-8 h-8 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Volunteer Registration Successful!"}),r&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Your Volunteer ID:"}),e.jsx("p",{className:"text-lg font-bold text-blue-900",children:r}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Please save this ID for future reference"})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your account has been created successfully. You can now log in to access your volunteer dashboard."}),e.jsx("button",{onClick:()=>{localStorage.removeItem("newVolunteerId"),g("/login")},className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white py-3 px-4 rounded-lg font-medium hover:from-orange-600 hover:to-orange-700 transition-all duration-200 transform hover:scale-105",children:"Go to Login"})]})})}return e.jsxs("div",{className:"min-h-screen relative",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat z-0",style:{backgroundImage:'url("https://ypiwfedtvgmazqcwolac.supabase.co/storage/v1/object/public/Assets/careercenter.png")'},children:e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-10"})}),e.jsxs("div",{className:"relative z-10 py-8 px-4",children:[e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx(b,{className:"h-12 w-12 text-white mr-3 drop-shadow-lg"}),e.jsx("h1",{className:"text-4xl font-bold text-white drop-shadow-lg",children:"Volunteer Registration"})]}),e.jsx("p",{className:"text-white drop-shadow",children:"Join our amazing volunteer team and help make Career Week unforgettable!"})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center max-w-2xl mx-auto",children:x.map((r,t)=>e.jsxs(O.Fragment,{children:[e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 transition-colors ${n>=r.id?"bg-orange-500 border-orange-500 text-white":"bg-white border-gray-300 text-gray-400"}`,children:e.jsx(r.icon,{className:"w-5 h-5"})})}),t<x.length-1&&e.jsx("div",{className:`flex-1 h-0.5 mx-2 transition-colors ${n>r.id?"bg-orange-500":"bg-gray-300"}`})]},r.id))}),e.jsx("div",{className:"flex justify-between max-w-2xl mx-auto mt-2",children:x.map(r=>e.jsx("div",{className:"text-xs text-center",style:{width:"120px"},children:e.jsx("span",{className:`${n>=r.id?"text-white font-medium drop-shadow":"text-white drop-shadow"}`,children:r.title})},r.id))})]}),e.jsxs("form",{onSubmit:X,className:"bg-white rounded-2xl shadow-2xl p-8 border border-orange-100",children:[s("general")&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center",children:[e.jsx(Y,{className:"w-5 h-5 text-red-600 mr-3"}),e.jsx("p",{className:"text-red-700",children:s("general")})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:x[n-1].title}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 h-2 rounded-full transition-all duration-300",style:{width:`${n/3*100}%`}})})]}),z(),e.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:V,disabled:n===1,className:`px-6 py-3 rounded-lg font-medium transition-all duration-200 ${n===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Previous"}),n<3?e.jsxs("button",{type:"button",onClick:F,className:"px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg font-medium hover:from-orange-600 hover:to-orange-700 transition-all duration-200 transform hover:scale-105 flex items-center",children:["Next",e.jsx(H,{className:"w-4 h-4 ml-2"})]}):e.jsx("button",{type:"submit",disabled:y,className:"px-8 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg font-medium hover:from-orange-600 hover:to-orange-700 transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Volunteer Account..."]}):"Create Volunteer Account"})]}),e.jsx("div",{className:"text-center mt-6 pt-6 border-t border-gray-200",children:e.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",onClick:()=>g("/login"),className:"text-orange-600 hover:text-orange-700 font-medium transition-colors",children:"Sign in here"})]})})]})]})]})};export{ne as VolunteerRegistration};
